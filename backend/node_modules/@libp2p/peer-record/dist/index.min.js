(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PPeerRecord = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PPeerRecord=(()=>{var dn=Object.defineProperty;var Da=Object.getOwnPropertyDescriptor;var Pa=Object.getOwnPropertyNames;var La=Object.prototype.hasOwnProperty;var yt=(e,t)=>{for(var r in t)dn(e,r,{get:t[r],enumerable:!0})},Oa=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Pa(t))!La.call(e,o)&&o!==r&&dn(e,o,{get:()=>t[o],enumerable:!(n=Da(t,o))||n.enumerable});return e};var Ua=e=>Oa(dn({},"__esModule",{value:!0}),e);var dl={};yt(dl,{PeerRecord:()=>hn,RecordEnvelope:()=>Xr});var pn=Symbol.for("@libp2p/peer-id");var et=class extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}},Ee=class extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}};var Sr=class extends Error{static name="InvalidMultihashError";constructor(t="Invalid Multihash"){super(t),this.name="InvalidMultihashError"}};var Se=class extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}};var xn={};yt(xn,{base58btc:()=>G,base58flickr:()=>Va});var bl=new Uint8Array(0);function ys(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Ot(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function bs(e){return new TextEncoder().encode(e)}function gs(e){return new TextDecoder().decode(e)}function Ka(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,c=e.charAt(0),f=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var E=0,v=0,g=0,A=d.length;g!==A&&d[g]===0;)g++,E++;for(var w=(A-g)*l+1>>>0,D=new Uint8Array(w);g!==A;){for(var O=d[g],k=0,N=w-1;(O!==0||k<v)&&N!==-1;N--,k++)O+=256*D[N]>>>0,D[N]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");v=k,g++}for(var U=w-v;U!==w&&D[U]===0;)U++;for(var x=c.repeat(E);U<w;++U)x+=e.charAt(D[U]);return x}function u(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var E=0;if(d[E]!==" "){for(var v=0,g=0;d[E]===c;)v++,E++;for(var A=(d.length-E)*f+1>>>0,w=new Uint8Array(A);d[E];){var D=r[d.charCodeAt(E)];if(D===255)return;for(var O=0,k=A-1;(D!==0||O<g)&&k!==-1;k--,O++)D+=a*w[k]>>>0,w[k]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");g=O,E++}if(d[E]!==" "){for(var N=A-g;N!==A&&w[N]===0;)N++;for(var U=new Uint8Array(v+(A-N)),x=v;N!==A;)U[x++]=w[N++];return U}}}function p(d){var E=u(d);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:u,decode:p}}var Ra=Ka,Na=Ra,ws=Na;var mn=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},yn=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){this.name=t,this.prefix=r;let o=r.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Es(this,t)}},bn=class{decoders;constructor(t){this.decoders=t}or(t){return Es(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Es(e,t){return new bn({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var gn=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new mn(t,r,n),this.decoder=new yn(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function ve({name:e,prefix:t,encode:r,decode:n}){return new gn(e,t,r,n)}function Qt({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=ws(r,e);return ve({prefix:t,name:e,encode:n,decode:s=>Ot(o(s))})}function ka(e,t,r,n){let o=e.length;for(;e[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),i=0,a=0,c=0;for(let f=0;f<o;++f){let l=t[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|l,i+=r,i>=8&&(i-=8,s[c++]=255&a>>i)}if(i>=r||(255&a<<8-i)!==0)throw new SyntaxError("Unexpected end of data");return s}function Ma(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i!==0&&(s+=t[o&a<<r-i]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function qa(e){let t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}function W({name:e,prefix:t,bitsPerChar:r,alphabet:n}){let o=qa(n);return ve({prefix:t,name:e,encode(s){return Ma(s,n,r)},decode(s){return ka(s,o,r,e)}})}var G=Qt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Va=Qt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wn={};yt(wn,{base32:()=>te,base32hex:()=>Za,base32hexpad:()=>$a,base32hexpadupper:()=>ja,base32hexupper:()=>Ga,base32pad:()=>za,base32padupper:()=>Fa,base32upper:()=>Ha,base32z:()=>Ya});var te=W({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ha=W({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),za=W({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Fa=W({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Za=W({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ga=W({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$a=W({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ja=W({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ya=W({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var En={};yt(En,{base36:()=>Fe,base36upper:()=>Wa});var Fe=Qt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Wa=Qt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Xa=As,Ss=128,Ja=127,Qa=~Ja,tc=Math.pow(2,31);function As(e,t,r){t=t||[],r=r||0;for(var n=r;e>=tc;)t[r++]=e&255|Ss,e/=128;for(;e&Qa;)t[r++]=e&255|Ss,e>>>=7;return t[r]=e|0,As.bytes=r-n+1,t}var ec=Sn,rc=128,vs=127;function Sn(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw Sn.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&vs)<<o:(i&vs)*Math.pow(2,o),o+=7}while(i>=rc);return Sn.bytes=s-n,r}var nc=Math.pow(2,7),oc=Math.pow(2,14),sc=Math.pow(2,21),ic=Math.pow(2,28),ac=Math.pow(2,35),cc=Math.pow(2,42),uc=Math.pow(2,49),fc=Math.pow(2,56),lc=Math.pow(2,63),hc=function(e){return e<nc?1:e<oc?2:e<sc?3:e<ic?4:e<ac?5:e<cc?6:e<uc?7:e<fc?8:e<lc?9:10},dc={encode:Xa,decode:ec,encodingLength:hc},pc=dc,Ze=pc;function Ge(e,t=0){return[Ze.decode(e,t),Ze.decode.bytes]}function Ae(e,t,r=0){return Ze.encode(e,t,r),t}function Ie(e){return Ze.encodingLength(e)}function Dt(e,t){let r=t.byteLength,n=Ie(e),o=n+Ie(r),s=new Uint8Array(o+r);return Ae(e,s,0),Ae(r,s,n),s.set(t,o),new Be(e,r,t,s)}function $e(e){let t=Ot(e),[r,n]=Ge(t),[o,s]=Ge(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Be(r,o,i,t)}function Is(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&ys(e.bytes,r.bytes)}}var Be=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};function Bs(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return yc(r,vn(e),t??G.encoder);default:return bc(r,vn(e),t??te.encoder)}}var _s=new WeakMap;function vn(e){let t=_s.get(e);if(t==null){let r=new Map;return _s.set(e,r),r}return t}var Q=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==je)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==gc)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Dt(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&Is(t.multihash,n.multihash)}toString(t){return Bs(this,t)}toJSON(){return{"/":Bs(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new e(n,o,s,i??Cs(n,o,s.bytes))}else if(r[xc]===!0){let{version:n,multihash:o,code:s}=r,i=$e(o);return e.create(n,s,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==je)throw new Error(`Version 0 CID must use dag-pb (code: ${je}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=Cs(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,je,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=Ot(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new Be(r.multihashCode,r.digestSize,s,o);return[r.version===0?e.createV0(i):e.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[h,u]=Ge(t.subarray(r));return r+=u,h},o=n(),s=je;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),f=r+c,l=f-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:l,size:f}}static parse(t,r){let[n,o]=mc(t,r),s=e.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return vn(s).set(n,t),s}};function mc(e,t){switch(e[0]){case"Q":{let r=t??G;return[G.prefix,r.decode(`${G.prefix}${e}`)]}case G.prefix:{let r=t??G;return[G.prefix,r.decode(e)]}case te.prefix:{let r=t??te;return[te.prefix,r.decode(e)]}case Fe.prefix:{let r=t??Fe;return[Fe.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function yc(e,t,r){let{prefix:n}=r;if(n!==G.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o}function bc(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o}var je=112,gc=18;function Cs(e,t,r){let n=Ie(e),o=n+Ie(t),s=new Uint8Array(o+r.byteLength);return Ae(e,s,0),Ae(t,s,n),s.set(r,o),s}var xc=Symbol.for("@ipld/js-cid/CID");var An={};yt(An,{identity:()=>_t});var Ts=0,wc="identity",Ds=Ot;function Ec(e,t){if(t?.truncate!=null&&t.truncate!==e.byteLength){if(t.truncate<0||t.truncate>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,t.truncate)}return Dt(Ts,Ds(e))}var _t={code:Ts,name:wc,encode:Ds,digest:Ec};function rt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function it(e=0){return new Uint8Array(e)}function bt(e=0){return new Uint8Array(e)}function Ut(e,t){t==null&&(t=e.reduce((o,s)=>o+s.length,0));let r=bt(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var Ls=Symbol.for("@achingbrain/uint8arraylist");function Ps(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let o=r+n.byteLength;if(t<o)return{buf:n,index:t-r};r=o}throw new RangeError("index is out of bounds")}function Ar(e){return!!e?.[Ls]}var ht=class e{bufs;length;[Ls]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Ar(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Ar(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=Ps(this.bufs,t);return r.buf[r.index]}set(t,r){let n=Ps(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(Ar(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:o}=this._subList(t,r);return Ut(n,o)}subarray(t,r){let{bufs:n,length:o}=this._subList(t,r);return n.length===1?n[0]:Ut(n,o)}sublist(t,r){let{bufs:n,length:o}=this._subList(t,r),s=new e;return s.length=o,s.bufs=[...n],s}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};let n=[],o=0;for(let s=0;s<this.bufs.length;s++){let i=this.bufs[s],a=o,c=a+i.byteLength;if(o=c,t>=c)continue;let f=t>=a&&t<c,l=r>a&&r<=c;if(f&&l){if(t===a&&r===c){n.push(i);break}let h=t-a;n.push(i.subarray(h,h+(r-t)));break}if(f){if(t===0){n.push(i);continue}n.push(i.subarray(t-a));continue}if(l){if(r===c){n.push(i);break}n.push(i.subarray(0,r-a));break}n.push(i)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!Ar(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");let s=256,i=new Int32Array(s);for(let h=0;h<s;h++)i[h]=-1;for(let h=0;h<o;h++)i[n[h]]=h;let a=i,c=this.byteLength-n.byteLength,f=n.byteLength-1,l;for(let h=r;h<=c;h+=l){l=0;for(let u=f;u>=0;u--){let p=this.get(h+u);if(n[u]!==p){l=Math.max(1,u-a[p]);break}}if(l===0)return h}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=bt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let o=it(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,r,n),this.write(o,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let o=it(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,r,n),this.write(o,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let o=it(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,r,n),this.write(o,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=bt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let o=it(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,r,n),this.write(o,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let o=it(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,r,n),this.write(o,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let o=it(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,r,n),this.write(o,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let o=it(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,r,n),this.write(o,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let o=it(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,r,n),this.write(o,t)}equals(t){if(t==null||!(t instanceof e)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!rt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new e;return n.bufs=t,r==null&&(r=t.reduce((o,s)=>o+s.byteLength,0)),n.length=r,n}};var In={};yt(In,{base10:()=>Sc});var Sc=Qt({prefix:"9",name:"base10",alphabet:"0123456789"});var Bn={};yt(Bn,{base16:()=>vc,base16upper:()=>Ac});var vc=W({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ac=W({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _n={};yt(_n,{base2:()=>Ic});var Ic=W({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Cn={};yt(Cn,{base256emoji:()=>Dc});var Os=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Bc=Os.reduce((e,t,r)=>(e[r]=t,e),[]),_c=Os.reduce((e,t,r)=>{let n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function Cc(e){return e.reduce((t,r)=>(t+=Bc[r],t),"")}function Tc(e){let t=[];for(let r of e){let n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);let o=_c[n];if(o==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(o)}return new Uint8Array(t)}var Dc=ve({prefix:"\u{1F680}",name:"base256emoji",encode:Cc,decode:Tc});var Dn={};yt(Dn,{base64:()=>Pc,base64pad:()=>Lc,base64url:()=>Tn,base64urlpad:()=>Oc});var Pc=W({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Lc=W({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Tn=W({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Oc=W({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Pn={};yt(Pn,{base8:()=>Uc});var Uc=W({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ln={};yt(Ln,{identity:()=>Kc});var Kc=ve({prefix:"\0",name:"identity",encode:e=>gs(e),decode:e=>bs(e)});var th=new TextEncoder,eh=new TextDecoder;var Kn={};yt(Kn,{sha256:()=>Ye,sha512:()=>Mc});var kc=20;function Un({name:e,code:t,encode:r,minDigestLength:n,maxDigestLength:o}){return new On(e,t,r,n,o)}var On=class{name;code;encode;minDigestLength;maxDigestLength;constructor(t,r,n,o,s){this.name=t,this.code=r,this.encode=n,this.minDigestLength=o??kc,this.maxDigestLength=s}digest(t,r){if(r?.truncate!=null){if(r.truncate<this.minDigestLength)throw new Error(`Invalid truncate option, must be greater than or equal to ${this.minDigestLength}`);if(this.maxDigestLength!=null&&r.truncate>this.maxDigestLength)throw new Error(`Invalid truncate option, must be less than or equal to ${this.maxDigestLength}`)}if(t instanceof Uint8Array){let n=this.encode(t);return n instanceof Uint8Array?Us(n,this.code,r?.truncate):n.then(o=>Us(o,this.code,r?.truncate))}else throw Error("Unknown type, must be binary type")}};function Us(e,t,r){if(r!=null&&r!==e.byteLength){if(r>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,r)}return Dt(t,e)}function Rs(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}var Ye=Un({name:"sha2-256",code:18,encode:Rs("SHA-256")}),Mc=Un({name:"sha2-512",code:19,encode:Rs("SHA-512")});var We={...Ln,..._n,...Pn,...In,...Bn,...wn,...En,...xn,...Dn,...Cn},dh={...Kn,...An};function ks(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Ns=ks("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Rn=ks("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=bt(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),qc={utf8:Ns,"utf-8":Ns,hex:We.base16,latin1:Rn,ascii:Rn,binary:Rn,...We},Ir=qc;function V(e,t="utf8"){let r=Ir[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function M(e,t="utf8"){let r=Ir[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var Vc=parseInt("11111",2),Nn=parseInt("10000000",2),Hc=parseInt("01111111",2),Ms={0:Xe,1:Xe,2:zc,3:Gc,4:$c,5:Zc,6:Fc,16:Xe,22:Xe,48:Xe};function Kt(e,t={offset:0}){let r=e[t.offset]&Vc;if(t.offset++,Ms[r]!=null)return Ms[r](e,t);throw new Error("No decoder for tag "+r)}function Je(e,t){let r=0;if((e[t.offset]&Nn)===Nn){let n=e[t.offset]&Hc,o="0x";t.offset++;for(let s=0;s<n;s++,t.offset++)o+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(o,16)}else r=e[t.offset],t.offset++;return r}function Xe(e,t){Je(e,t);let r=[];for(;!(t.offset>=e.byteLength);){let n=Kt(e,t);if(n===null)break;r.push(n)}return r}function zc(e,t){let r=Je(e,t),n=t.offset,o=t.offset+r,s=[];for(let i=n;i<o;i++)i===n&&e[i]===0||s.push(e[i]);return t.offset+=r,Uint8Array.from(s)}function Fc(e,t){let r=Je(e,t),n=t.offset+r,o=e[t.offset];t.offset++;let s=0,i=0;o<40?(s=0,i=o):o<80?(s=1,i=o-40):(s=2,i=o-80);let a=`${s}.${i}`,c=[];for(;t.offset<n;){let f=e[t.offset];if(t.offset++,c.push(f&127),f<128){c.reverse();let l=0;for(let h=0;h<c.length;h++)l+=c[h]<<h*7;a+=`.${l}`,c=[]}}return a}function Zc(e,t){return t.offset++,null}function Gc(e,t){let r=Je(e,t),n=e[t.offset];t.offset++;let o=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function $c(e,t){let r=Je(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n}function jc(e){let t=e.toString(16);t.length%2===1&&(t="0"+t);let r=new ht;for(let n=0;n<t.length;n+=2)r.append(Uint8Array.from([parseInt(`${t[n]}${t[n+1]}`,16)]));return r}function kn(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);let t=jc(e.byteLength);return new ht(Uint8Array.from([t.byteLength|Nn]),t)}function gt(e){let t=new ht,r=128;return(e.subarray()[0]&r)===r&&t.append(Uint8Array.from([0])),t.append(e),new ht(Uint8Array.from([2]),kn(t),t)}function Br(e){let t=Uint8Array.from([0]),r=new ht(t,e);return new ht(Uint8Array.from([3]),kn(r),r)}function ee(e,t=48){let r=new ht;for(let n of e)r.append(n);return new ht(Uint8Array.from([t]),kn(r),r)}async function qs(e,t,r,n){let o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);n?.signal?.throwIfAborted();let s=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,t,r.subarray());return n?.signal?.throwIfAborted(),s}var Yc=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),Wc=Uint8Array.from([6,5,43,129,4,0,34]),Xc=Uint8Array.from([6,5,43,129,4,0,35]),Jc={ext:!0,kty:"EC",crv:"P-256"},Qc={ext:!0,kty:"EC",crv:"P-384"},tu={ext:!0,kty:"EC",crv:"P-521"},Mn=32,qn=48,Vn=66;function Hn(e){let t=Kt(e);return Vs(t)}function Vs(e){let t=e[1][1][0],r=1,n,o;if(t.byteLength===Mn*2+1)return n=M(t.subarray(r,r+Mn),"base64url"),o=M(t.subarray(r+Mn),"base64url"),new _e({...Jc,key_ops:["verify"],x:n,y:o});if(t.byteLength===qn*2+1)return n=M(t.subarray(r,r+qn),"base64url"),o=M(t.subarray(r+qn),"base64url"),new _e({...Qc,key_ops:["verify"],x:n,y:o});if(t.byteLength===Vn*2+1)return n=M(t.subarray(r,r+Vn),"base64url"),o=M(t.subarray(r+Vn),"base64url"),new _e({...tu,key_ops:["verify"],x:n,y:o});throw new et(`coordinates were wrong length, got ${t.byteLength}, expected 65, 97 or 133`)}function Hs(e){return ee([gt(Uint8Array.from([1])),ee([eu(e.crv)],160),ee([Br(new ht(Uint8Array.from([4]),V(e.x??"","base64url"),V(e.y??"","base64url")))],161)]).subarray()}function eu(e){if(e==="P-256")return Yc;if(e==="P-384")return Wc;if(e==="P-521")return Xc;throw new et(`Invalid curve ${e}`)}var _e=class{type="ECDSA";jwk;_raw;constructor(t){this.jwk=t}get raw(){return this._raw==null&&(this._raw=Hs(this.jwk)),this._raw}toMultihash(){return _t.digest(re(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return G.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}async verify(t,r,n){return qs(this.jwk,r,t,n)}};var he=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Nt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Qe(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function xt(e,...t){if(!Nt(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function _r(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Qe(e.outputLen),Qe(e.blockLen)}function Te(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Fs(e,t){xt(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function kt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Cr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ct(e,t){return e<<32-t|e>>>t}var Zs=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ru=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function At(e){if(xt(e),Zs)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=ru[e[r]];return t}var Rt={_0:48,_9:57,A:65,F:70,a:97,f:102};function zs(e){if(e>=Rt._0&&e<=Rt._9)return e-Rt._0;if(e>=Rt.A&&e<=Rt.F)return e-(Rt.A-10);if(e>=Rt.a&&e<=Rt.f)return e-(Rt.a-10)}function de(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Zs)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,s=0;o<r;o++,s+=2){let i=zs(e.charCodeAt(s)),a=zs(e.charCodeAt(s+1));if(i===void 0||a===void 0){let c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[o]=i*16+a}return n}function zn(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function tr(e){return typeof e=="string"&&(e=zn(e)),xt(e),e}function dt(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];xt(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let s=e[n];r.set(s,o),o+=s.length}return r}var Ce=class{};function Fn(e){let t=n=>e().update(tr(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function De(e=32){if(he&&typeof he.getRandomValues=="function")return he.getRandomValues(new Uint8Array(e));if(he&&typeof he.randomBytes=="function")return Uint8Array.from(he.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function nu(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),s=BigInt(4294967295),i=Number(r>>o&s),a=Number(r&s),c=n?4:0,f=n?0:4;e.setUint32(t+c,i,n),e.setUint32(t+f,a,n)}function Gs(e,t,r){return e&t^~e&r}function $s(e,t,r){return e&t^e&r^t&r}var er=class extends Ce{constructor(t,r,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=Cr(this.buffer)}update(t){Te(this),t=tr(t),xt(t);let{view:r,buffer:n,blockLen:o}=this,s=t.length;for(let i=0;i<s;){let a=Math.min(o-this.pos,s-i);if(a===o){let c=Cr(t);for(;o<=s-i;i+=o)this.process(c,i);continue}n.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Te(this),Fs(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:s}=this,{pos:i}=this;r[i++]=128,kt(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(n,0),i=0);for(let h=i;h<o;h++)r[h]=0;nu(n,o-8,BigInt(this.length*8),s),this.process(n,0);let a=Cr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,l=this.get();if(f>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<f;h++)a.setUint32(4*h,l[h],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:s,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=s,t.length=o,t.pos=a,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}},Mt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var at=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Tr=BigInt(4294967295),js=BigInt(32);function ou(e,t=!1){return t?{h:Number(e&Tr),l:Number(e>>js&Tr)}:{h:Number(e>>js&Tr)|0,l:Number(e&Tr)|0}}function Ys(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let s=0;s<r;s++){let{h:i,l:a}=ou(e[s],t);[n[s],o[s]]=[i,a]}return[n,o]}var Zn=(e,t,r)=>e>>>r,Gn=(e,t,r)=>e<<32-r|t>>>r,pe=(e,t,r)=>e>>>r|t<<32-r,me=(e,t,r)=>e<<32-r|t>>>r,rr=(e,t,r)=>e<<64-r|t>>>r-32,nr=(e,t,r)=>e>>>r-32|t<<64-r;function Pt(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}var Ws=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Xs=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Js=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Qs=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,ti=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),ei=(e,t,r,n,o,s)=>t+r+n+o+s+(e/2**32|0)|0;var iu=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ne=new Uint32Array(64),Dr=class extends er{constructor(t=32){super(64,t,8,!1),this.A=Mt[0]|0,this.B=Mt[1]|0,this.C=Mt[2]|0,this.D=Mt[3]|0,this.E=Mt[4]|0,this.F=Mt[5]|0,this.G=Mt[6]|0,this.H=Mt[7]|0}get(){let{A:t,B:r,C:n,D:o,E:s,F:i,G:a,H:c}=this;return[t,r,n,o,s,i,a,c]}set(t,r,n,o,s,i,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,r){for(let h=0;h<16;h++,r+=4)ne[h]=t.getUint32(r,!1);for(let h=16;h<64;h++){let u=ne[h-15],p=ne[h-2],d=Ct(u,7)^Ct(u,18)^u>>>3,E=Ct(p,17)^Ct(p,19)^p>>>10;ne[h]=E+ne[h-7]+d+ne[h-16]|0}let{A:n,B:o,C:s,D:i,E:a,F:c,G:f,H:l}=this;for(let h=0;h<64;h++){let u=Ct(a,6)^Ct(a,11)^Ct(a,25),p=l+u+Gs(a,c,f)+iu[h]+ne[h]|0,E=(Ct(n,2)^Ct(n,13)^Ct(n,22))+$s(n,o,s)|0;l=f,f=c,c=a,a=i+p|0,i=s,s=o,o=n,n=p+E|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,l=l+this.H|0,this.set(n,o,s,i,a,c,f,l)}roundClean(){kt(ne)}destroy(){this.set(0,0,0,0,0,0,0,0),kt(this.buffer)}};var ri=Ys(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),au=ri[0],cu=ri[1],oe=new Uint32Array(80),se=new Uint32Array(80),$n=class extends er{constructor(t=64){super(128,t,16,!1),this.Ah=at[0]|0,this.Al=at[1]|0,this.Bh=at[2]|0,this.Bl=at[3]|0,this.Ch=at[4]|0,this.Cl=at[5]|0,this.Dh=at[6]|0,this.Dl=at[7]|0,this.Eh=at[8]|0,this.El=at[9]|0,this.Fh=at[10]|0,this.Fl=at[11]|0,this.Gh=at[12]|0,this.Gl=at[13]|0,this.Hh=at[14]|0,this.Hl=at[15]|0}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:s,Cl:i,Dh:a,Dl:c,Eh:f,El:l,Fh:h,Fl:u,Gh:p,Gl:d,Hh:E,Hl:v}=this;return[t,r,n,o,s,i,a,c,f,l,h,u,p,d,E,v]}set(t,r,n,o,s,i,a,c,f,l,h,u,p,d,E,v){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=l|0,this.Fh=h|0,this.Fl=u|0,this.Gh=p|0,this.Gl=d|0,this.Hh=E|0,this.Hl=v|0}process(t,r){for(let w=0;w<16;w++,r+=4)oe[w]=t.getUint32(r),se[w]=t.getUint32(r+=4);for(let w=16;w<80;w++){let D=oe[w-15]|0,O=se[w-15]|0,k=pe(D,O,1)^pe(D,O,8)^Zn(D,O,7),N=me(D,O,1)^me(D,O,8)^Gn(D,O,7),U=oe[w-2]|0,x=se[w-2]|0,C=pe(U,x,19)^rr(U,x,61)^Zn(U,x,6),K=me(U,x,19)^nr(U,x,61)^Gn(U,x,6),T=Js(N,K,se[w-7],se[w-16]),b=Qs(T,k,C,oe[w-7],oe[w-16]);oe[w]=b|0,se[w]=T|0}let{Ah:n,Al:o,Bh:s,Bl:i,Ch:a,Cl:c,Dh:f,Dl:l,Eh:h,El:u,Fh:p,Fl:d,Gh:E,Gl:v,Hh:g,Hl:A}=this;for(let w=0;w<80;w++){let D=pe(h,u,14)^pe(h,u,18)^rr(h,u,41),O=me(h,u,14)^me(h,u,18)^nr(h,u,41),k=h&p^~h&E,N=u&d^~u&v,U=ti(A,O,N,cu[w],se[w]),x=ei(U,g,D,k,au[w],oe[w]),C=U|0,K=pe(n,o,28)^rr(n,o,34)^rr(n,o,39),T=me(n,o,28)^nr(n,o,34)^nr(n,o,39),b=n&s^n&a^s&a,m=o&i^o&c^i&c;g=E|0,A=v|0,E=p|0,v=d|0,p=h|0,d=u|0,{h,l:u}=Pt(f|0,l|0,x|0,C|0),f=a|0,l=c|0,a=s|0,c=i|0,s=n|0,i=o|0;let y=Ws(C,T,m);n=Xs(y,x,K,b),o=y|0}({h:n,l:o}=Pt(this.Ah|0,this.Al|0,n|0,o|0)),{h:s,l:i}=Pt(this.Bh|0,this.Bl|0,s|0,i|0),{h:a,l:c}=Pt(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l}=Pt(this.Dh|0,this.Dl|0,f|0,l|0),{h,l:u}=Pt(this.Eh|0,this.El|0,h|0,u|0),{h:p,l:d}=Pt(this.Fh|0,this.Fl|0,p|0,d|0),{h:E,l:v}=Pt(this.Gh|0,this.Gl|0,E|0,v|0),{h:g,l:A}=Pt(this.Hh|0,this.Hl|0,g|0,A|0),this.set(n,o,s,i,a,c,f,l,h,u,p,d,E,v,g,A)}roundClean(){kt(oe,se)}destroy(){kt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Pr=Fn(()=>new Dr);var ni=Fn(()=>new $n);var Wn=BigInt(0),Yn=BigInt(1);function qt(e,t=""){if(typeof e!="boolean"){let r=t&&`"${t}"`;throw new Error(r+"expected boolean, got type="+typeof e)}return e}function wt(e,t,r=""){let n=Nt(e),o=e?.length,s=t!==void 0;if(!n||s&&o!==t){let i=r&&`"${r}" `,a=s?` of length ${t}`:"",c=n?`length=${o}`:`type=${typeof e}`;throw new Error(i+"expected Uint8Array"+a+", got "+c)}return e}function or(e){let t=e.toString(16);return t.length&1?"0"+t:t}function oi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Wn:BigInt("0x"+e)}function Pe(e){return oi(At(e))}function Vt(e){return xt(e),oi(At(Uint8Array.from(e).reverse()))}function Lr(e,t){return de(e.toString(16).padStart(t*2,"0"))}function Xn(e,t){return Lr(e,t).reverse()}function z(e,t,r){let n;if(typeof t=="string")try{n=de(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Nt(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n}function si(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function Jn(e){return Uint8Array.from(e)}var jn=e=>typeof e=="bigint"&&Wn<=e;function ii(e,t,r){return jn(e)&&jn(t)&&jn(r)&&t<=e&&e<r}function sr(e,t,r,n){if(!ii(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Or(e){let t;for(t=0;e>Wn;e>>=Yn,t+=1);return t}var ie=e=>(Yn<<BigInt(e))-Yn;function ai(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=p=>new Uint8Array(p),o=p=>Uint8Array.of(p),s=n(e),i=n(e),a=0,c=()=>{s.fill(1),i.fill(0),a=0},f=(...p)=>r(i,s,...p),l=(p=n(0))=>{i=f(o(0),p),s=f(),p.length!==0&&(i=f(o(1),p),s=f())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0,d=[];for(;p<t;){s=f();let E=s.slice();d.push(E),p+=s.length}return dt(...d)};return(p,d)=>{c(),l(p);let E;for(;!(E=d(h()));)l();return c(),E}}function ae(e,t,r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(o,s,i){let a=e[o];if(i&&a===void 0)return;let c=typeof a;if(c!==s||a===null)throw new Error(`param "${o}" is invalid: expected ${s}, got ${c}`)}Object.entries(t).forEach(([o,s])=>n(o,s,!1)),Object.entries(r).forEach(([o,s])=>n(o,s,!0))}var Qn=()=>{throw new Error("not implemented")};function Le(e){let t=new WeakMap;return(r,...n)=>{let o=t.get(r);if(o!==void 0)return o;let s=e(r,...n);return t.set(r,s),s}}var pt=BigInt(0),nt=BigInt(1),ye=BigInt(2),fi=BigInt(3),li=BigInt(4),hi=BigInt(5),uu=BigInt(7),di=BigInt(8),fu=BigInt(9),pi=BigInt(16);function X(e,t){let r=e%t;return r>=pt?r:t+r}function Z(e,t,r){let n=e;for(;t-- >pt;)n*=n,n%=r;return n}function ci(e,t){if(e===pt)throw new Error("invert: expected non-zero number");if(t<=pt)throw new Error("invert: expected positive modulus, got "+t);let r=X(e,t),n=t,o=pt,s=nt,i=nt,a=pt;for(;r!==pt;){let f=n/r,l=n%r,h=o-i*f,u=s-a*f;n=r,r=l,o=i,s=a,i=h,a=u}if(n!==nt)throw new Error("invert: does not exist");return X(o,t)}function to(e,t,r){if(!e.eql(e.sqr(t),r))throw new Error("Cannot find square root")}function mi(e,t){let r=(e.ORDER+nt)/li,n=e.pow(t,r);return to(e,n,t),n}function lu(e,t){let r=(e.ORDER-hi)/di,n=e.mul(t,ye),o=e.pow(n,r),s=e.mul(t,o),i=e.mul(e.mul(s,ye),o),a=e.mul(s,e.sub(i,e.ONE));return to(e,a,t),a}function hu(e){let t=Et(e),r=yi(e),n=r(t,t.neg(t.ONE)),o=r(t,n),s=r(t,t.neg(n)),i=(e+uu)/pi;return(a,c)=>{let f=a.pow(c,i),l=a.mul(f,n),h=a.mul(f,o),u=a.mul(f,s),p=a.eql(a.sqr(l),c),d=a.eql(a.sqr(h),c);f=a.cmov(f,l,p),l=a.cmov(u,h,d);let E=a.eql(a.sqr(l),c),v=a.cmov(f,l,E);return to(a,v,c),v}}function yi(e){if(e<fi)throw new Error("sqrt is not defined for small field");let t=e-nt,r=0;for(;t%ye===pt;)t/=ye,r++;let n=ye,o=Et(e);for(;ui(o,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return mi;let s=o.pow(n,t),i=(t+nt)/ye;return function(c,f){if(c.is0(f))return f;if(ui(c,f)!==1)throw new Error("Cannot find square root");let l=r,h=c.mul(c.ONE,s),u=c.pow(f,t),p=c.pow(f,i);for(;!c.eql(u,c.ONE);){if(c.is0(u))return c.ZERO;let d=1,E=c.sqr(u);for(;!c.eql(E,c.ONE);)if(d++,E=c.sqr(E),d===l)throw new Error("Cannot find square root");let v=nt<<BigInt(l-d-1),g=c.pow(h,v);l=d,h=c.sqr(g),u=c.mul(u,h),p=c.mul(p,g)}return p}}function du(e){return e%li===fi?mi:e%di===hi?lu:e%pi===fu?hu(e):yi(e)}var Ht=(e,t)=>(X(e,t)&nt)===nt,pu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function eo(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=pu.reduce((n,o)=>(n[o]="function",n),t);return ae(e,r),e}function mu(e,t,r){if(r<pt)throw new Error("invalid exponent, negatives unsupported");if(r===pt)return e.ONE;if(r===nt)return t;let n=e.ONE,o=t;for(;r>pt;)r&nt&&(n=e.mul(n,o)),o=e.sqr(o),r>>=nt;return n}function ir(e,t,r=!1){let n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((i,a,c)=>e.is0(a)?i:(n[c]=i,e.mul(i,a)),e.ONE),s=e.inv(o);return t.reduceRight((i,a,c)=>e.is0(a)?i:(n[c]=e.mul(i,n[c]),e.mul(i,a)),s),n}function ui(e,t){let r=(e.ORDER-nt)/ye,n=e.pow(t,r),o=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),i=e.eql(n,e.neg(e.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function Ur(e,t){t!==void 0&&Qe(t);let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Et(e,t,r=!1,n={}){if(e<=pt)throw new Error("invalid field: expected ORDER > 0, got "+e);let o,s,i=!1,a;if(typeof t=="object"&&t!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");let u=t;u.BITS&&(o=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(r=u.isLE),typeof u.modFromBytes=="boolean"&&(i=u.modFromBytes),a=u.allowedLengths}else typeof t=="number"&&(o=t),n.sqrt&&(s=n.sqrt);let{nBitLength:c,nByteLength:f}=Ur(e,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l,h=Object.freeze({ORDER:e,isLE:r,BITS:c,BYTES:f,MASK:ie(c),ZERO:pt,ONE:nt,allowedLengths:a,create:u=>X(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return pt<=u&&u<e},is0:u=>u===pt,isValidNot0:u=>!h.is0(u)&&h.isValid(u),isOdd:u=>(u&nt)===nt,neg:u=>X(-u,e),eql:(u,p)=>u===p,sqr:u=>X(u*u,e),add:(u,p)=>X(u+p,e),sub:(u,p)=>X(u-p,e),mul:(u,p)=>X(u*p,e),pow:(u,p)=>mu(h,u,p),div:(u,p)=>X(u*ci(p,e),e),sqrN:u=>u*u,addN:(u,p)=>u+p,subN:(u,p)=>u-p,mulN:(u,p)=>u*p,inv:u=>ci(u,e),sqrt:s||(u=>(l||(l=du(e)),l(h,u))),toBytes:u=>r?Xn(u,f):Lr(u,f),fromBytes:(u,p=!0)=>{if(a){if(!a.includes(u.length)||u.length>f)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);let E=new Uint8Array(f);E.set(u,r?0:E.length-u.length),u=E}if(u.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+u.length);let d=r?Vt(u):Pe(u);if(i&&(d=X(d,e)),!p&&!h.isValid(d))throw new Error("invalid field element: outside of range 0..ORDER");return d},invertBatch:u=>ir(h,u),cmov:(u,p,d)=>d?p:u});return Object.freeze(h)}function bi(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function ro(e){let t=bi(e);return t+Math.ceil(t/2)}function no(e,t,r=!1){let n=e.length,o=bi(t),s=ro(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);let i=r?Vt(e):Pe(e),a=X(i,t-nt)+nt;return r?Xn(a,o):Lr(a,o)}var Oe=BigInt(0),be=BigInt(1);function ar(e,t){let r=t.negate();return e?r:t}function zt(e,t){let r=ir(e.Fp,t.map(n=>n.Z));return t.map((n,o)=>e.fromAffine(n.toAffine(r[o])))}function Ei(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function oo(e,t){Ei(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),o=2**e,s=ie(e),i=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:o,shiftBy:i}}function gi(e,t,r){let{windowSize:n,mask:o,maxNumber:s,shiftBy:i}=r,a=Number(e&o),c=e>>i;a>n&&(a-=s,c+=be);let f=t*n,l=f+Math.abs(a)-1,h=a===0,u=a<0,p=t%2!==0;return{nextN:c,offset:l,isZero:h,isNeg:u,isNegF:p,offsetF:f}}function yu(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function bu(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}var so=new WeakMap,Si=new WeakMap;function io(e){return Si.get(e)||1}function xi(e){if(e!==Oe)throw new Error("invalid wNAF")}var Ue=class{constructor(t,r){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=r}_unsafeLadder(t,r,n=this.ZERO){let o=t;for(;r>Oe;)r&be&&(n=n.add(o)),o=o.double(),r>>=be;return n}precomputeWindow(t,r){let{windows:n,windowSize:o}=oo(r,this.bits),s=[],i=t,a=i;for(let c=0;c<n;c++){a=i,s.push(a);for(let f=1;f<o;f++)a=a.add(i),s.push(a);i=a.double()}return s}wNAF(t,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let o=this.ZERO,s=this.BASE,i=oo(t,this.bits);for(let a=0;a<i.windows;a++){let{nextN:c,offset:f,isZero:l,isNeg:h,isNegF:u,offsetF:p}=gi(n,a,i);n=c,l?s=s.add(ar(u,r[p])):o=o.add(ar(h,r[f]))}return xi(n),{p:o,f:s}}wNAFUnsafe(t,r,n,o=this.ZERO){let s=oo(t,this.bits);for(let i=0;i<s.windows&&n!==Oe;i++){let{nextN:a,offset:c,isZero:f,isNeg:l}=gi(n,i,s);if(n=a,!f){let h=r[c];o=o.add(l?h.negate():h)}}return xi(n),o}getPrecomputes(t,r,n){let o=so.get(r);return o||(o=this.precomputeWindow(r,t),t!==1&&(typeof n=="function"&&(o=n(o)),so.set(r,o))),o}cached(t,r,n){let o=io(t);return this.wNAF(o,this.getPrecomputes(o,t,n),r)}unsafe(t,r,n,o){let s=io(t);return s===1?this._unsafeLadder(t,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,t,n),r,o)}createCache(t,r){Ei(r,this.bits),Si.set(t,r),so.delete(t)}hasCache(t){return io(t)!==1}};function vi(e,t,r,n){let o=t,s=e.ZERO,i=e.ZERO;for(;r>Oe||n>Oe;)r&be&&(s=s.add(o)),n&be&&(i=i.add(o)),o=o.double(),r>>=be,n>>=be;return{p1:s,p2:i}}function Ke(e,t,r,n){yu(r,e),bu(n,t);let o=r.length,s=n.length;if(o!==s)throw new Error("arrays of points and scalars must have equal length");let i=e.ZERO,a=Or(BigInt(o)),c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);let f=ie(c),l=new Array(Number(f)+1).fill(i),h=Math.floor((t.BITS-1)/c)*c,u=i;for(let p=h;p>=0;p-=c){l.fill(i);for(let E=0;E<s;E++){let v=n[E],g=Number(v>>BigInt(p)&f);l[g]=l[g].add(r[E])}let d=i;for(let E=l.length-1,v=i;E>0;E--)v=v.add(l[E]),d=d.add(v);if(u=u.add(d),p!==0)for(let E=0;E<c;E++)u=u.double()}return u}function wi(e,t,r){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return eo(t),t}else return Et(e,{isLE:r})}function Kr(e,t,r={},n){if(n===void 0&&(n=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(let c of["p","n","h"]){let f=t[c];if(!(typeof f=="bigint"&&f>Oe))throw new Error(`CURVE.${c} must be positive bigint`)}let o=wi(t.p,r.Fp,n),s=wi(t.n,r.Fn,n),a=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(let c of a)if(!o.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:s}}var ce=BigInt(0),ot=BigInt(1),ao=BigInt(2),gu=BigInt(8);function xu(e,t,r,n){let o=e.sqr(r),s=e.sqr(n),i=e.add(e.mul(t.a,o),s),a=e.add(e.ONE,e.mul(t.d,e.mul(o,s)));return e.eql(i,a)}function wu(e,t={}){let r=Kr("edwards",e,t,t.FpFnLE),{Fp:n,Fn:o}=r,s=r.CURVE,{h:i}=s;ae(t,{},{uvRatio:"function"});let a=ao<<BigInt(o.BYTES*8)-ot,c=v=>n.create(v),f=t.uvRatio||((v,g)=>{try{return{isValid:!0,value:n.sqrt(n.div(v,g))}}catch{return{isValid:!1,value:ce}}});if(!xu(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function l(v,g,A=!1){let w=A?ot:ce;return sr("coordinate "+v,g,w,a),g}function h(v){if(!(v instanceof d))throw new Error("ExtendedPoint expected")}let u=Le((v,g)=>{let{X:A,Y:w,Z:D}=v,O=v.is0();g==null&&(g=O?gu:n.inv(D));let k=c(A*g),N=c(w*g),U=n.mul(D,g);if(O)return{x:ce,y:ot};if(U!==ot)throw new Error("invZ was invalid");return{x:k,y:N}}),p=Le(v=>{let{a:g,d:A}=s;if(v.is0())throw new Error("bad point: ZERO");let{X:w,Y:D,Z:O,T:k}=v,N=c(w*w),U=c(D*D),x=c(O*O),C=c(x*x),K=c(N*g),T=c(x*c(K+U)),b=c(C+c(A*c(N*U)));if(T!==b)throw new Error("bad point: equation left != right (1)");let m=c(w*D),y=c(O*k);if(m!==y)throw new Error("bad point: equation left != right (2)");return!0});class d{constructor(g,A,w,D){this.X=l("x",g),this.Y=l("y",A),this.Z=l("z",w,!0),this.T=l("t",D),Object.freeze(this)}static CURVE(){return s}static fromAffine(g){if(g instanceof d)throw new Error("extended point not allowed");let{x:A,y:w}=g||{};return l("x",A),l("y",w),new d(A,w,ot,c(A*w))}static fromBytes(g,A=!1){let w=n.BYTES,{a:D,d:O}=s;g=Jn(wt(g,w,"point")),qt(A,"zip215");let k=Jn(g),N=g[w-1];k[w-1]=N&-129;let U=Vt(k),x=A?a:n.ORDER;sr("point.y",U,ce,x);let C=c(U*U),K=c(C-ot),T=c(O*C-D),{isValid:b,value:m}=f(K,T);if(!b)throw new Error("bad point: invalid y coordinate");let y=(m&ot)===ot,S=(N&128)!==0;if(!A&&m===ce&&S)throw new Error("bad point: x=0 and x_0=1");return S!==y&&(m=c(-m)),d.fromAffine({x:m,y:U})}static fromHex(g,A=!1){return d.fromBytes(z("point",g),A)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(g=8,A=!0){return E.createCache(this,g),A||this.multiply(ao),this}assertValidity(){p(this)}equals(g){h(g);let{X:A,Y:w,Z:D}=this,{X:O,Y:k,Z:N}=g,U=c(A*N),x=c(O*D),C=c(w*N),K=c(k*D);return U===x&&C===K}is0(){return this.equals(d.ZERO)}negate(){return new d(c(-this.X),this.Y,this.Z,c(-this.T))}double(){let{a:g}=s,{X:A,Y:w,Z:D}=this,O=c(A*A),k=c(w*w),N=c(ao*c(D*D)),U=c(g*O),x=A+w,C=c(c(x*x)-O-k),K=U+k,T=K-N,b=U-k,m=c(C*T),y=c(K*b),S=c(C*b),I=c(T*K);return new d(m,y,I,S)}add(g){h(g);let{a:A,d:w}=s,{X:D,Y:O,Z:k,T:N}=this,{X:U,Y:x,Z:C,T:K}=g,T=c(D*U),b=c(O*x),m=c(N*w*K),y=c(k*C),S=c((D+O)*(U+x)-T-b),I=y-m,P=y+m,B=c(b-A*T),_=c(S*I),L=c(P*B),R=c(S*B),$=c(I*P);return new d(_,L,$,R)}subtract(g){return this.add(g.negate())}multiply(g){if(!o.isValidNot0(g))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:A,f:w}=E.cached(this,g,D=>zt(d,D));return zt(d,[A,w])[0]}multiplyUnsafe(g,A=d.ZERO){if(!o.isValid(g))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return g===ce?d.ZERO:this.is0()||g===ot?this:E.unsafe(this,g,w=>zt(d,w),A)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return E.unsafe(this,s.n).is0()}toAffine(g){return u(this,g)}clearCofactor(){return i===ot?this:this.multiplyUnsafe(i)}toBytes(){let{x:g,y:A}=this.toAffine(),w=n.toBytes(A);return w[w.length-1]|=g&ot?128:0,w}toHex(){return At(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(g){return zt(d,g)}static msm(g,A){return Ke(d,o,g,A)}_setWindowSize(g){this.precompute(g)}toRawBytes(){return this.toBytes()}}d.BASE=new d(s.Gx,s.Gy,ot,c(s.Gx*s.Gy)),d.ZERO=new d(ce,ot,ot,ce),d.Fp=n,d.Fn=o;let E=new Ue(d,o.BITS);return d.BASE.precompute(8),d}var Rr=class{constructor(t){this.ep=t}static fromBytes(t){Qn()}static fromHex(t){Qn()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(t){return this.ep.toAffine(t)}toHex(){return At(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(t){return this.assertSame(t),this.init(this.ep.add(t.ep))}subtract(t){return this.assertSame(t),this.init(this.ep.subtract(t.ep))}multiply(t){return this.init(this.ep.multiply(t))}multiplyUnsafe(t){return this.init(this.ep.multiplyUnsafe(t))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(t,r){return this.init(this.ep.precompute(t,r))}toRawBytes(){return this.toBytes()}};function Eu(e,t,r={}){if(typeof t!="function")throw new Error('"hash" function param is required');ae(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:o,Fp:s,Fn:i}=e,a=r.randomBytes||De,c=r.adjustScalarBytes||(x=>x),f=r.domain||((x,C,K)=>{if(qt(K,"phflag"),C.length||K)throw new Error("Contexts/pre-hash are not supported");return x});function l(x){return i.create(Vt(x))}function h(x){let C=w.secretKey;x=z("private key",x,C);let K=z("hashed private key",t(x),2*C),T=c(K.slice(0,C)),b=K.slice(C,2*C),m=l(T);return{head:T,prefix:b,scalar:m}}function u(x){let{head:C,prefix:K,scalar:T}=h(x),b=o.multiply(T),m=b.toBytes();return{head:C,prefix:K,scalar:T,point:b,pointBytes:m}}function p(x){return u(x).pointBytes}function d(x=Uint8Array.of(),...C){let K=dt(...C);return l(t(f(K,z("context",x),!!n)))}function E(x,C,K={}){x=z("message",x),n&&(x=n(x));let{prefix:T,scalar:b,pointBytes:m}=u(C),y=d(K.context,T,x),S=o.multiply(y).toBytes(),I=d(K.context,S,m,x),P=i.create(y+I*b);if(!i.isValid(P))throw new Error("sign failed: invalid s");let B=dt(S,i.toBytes(P));return wt(B,w.signature,"result")}let v={zip215:!0};function g(x,C,K,T=v){let{context:b,zip215:m}=T,y=w.signature;x=z("signature",x,y),C=z("message",C),K=z("publicKey",K,w.publicKey),m!==void 0&&qt(m,"zip215"),n&&(C=n(C));let S=y/2,I=x.subarray(0,S),P=Vt(x.subarray(S,y)),B,_,L;try{B=e.fromBytes(K,m),_=e.fromBytes(I,m),L=o.multiplyUnsafe(P)}catch{return!1}if(!m&&B.isSmallOrder())return!1;let R=d(b,_.toBytes(),B.toBytes(),C);return _.add(B.multiplyUnsafe(R)).subtract(L).clearCofactor().is0()}let A=s.BYTES,w={secretKey:A,publicKey:A,signature:2*A,seed:A};function D(x=a(w.seed)){return wt(x,w.seed,"seed")}function O(x){let C=U.randomSecretKey(x);return{secretKey:C,publicKey:p(C)}}function k(x){return Nt(x)&&x.length===i.BYTES}function N(x,C){try{return!!e.fromBytes(x,C)}catch{return!1}}let U={getExtendedPublicKey:u,randomSecretKey:D,isValidSecretKey:k,isValidPublicKey:N,toMontgomery(x){let{y:C}=e.fromBytes(x),K=w.publicKey,T=K===32;if(!T&&K!==57)throw new Error("only defined for 25519 and 448");let b=T?s.div(ot+C,ot-C):s.div(C-ot,C+ot);return s.toBytes(b)},toMontgomerySecret(x){let C=w.secretKey;wt(x,C);let K=t(x.subarray(0,C));return c(K).subarray(0,C)},randomPrivateKey:D,precompute(x=8,C=e.BASE){return C.precompute(x,!1)}};return Object.freeze({keygen:O,getPublicKey:p,sign:E,verify:g,utils:U,Point:e,lengths:w})}function Su(e){let t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=Et(t.n,e.nBitLength,!0),o={Fp:r,Fn:n,uvRatio:e.uvRatio},s={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:o,hash:e.hash,eddsaOpts:s}}function vu(e,t){let r=t.Point;return Object.assign({},t,{ExtendedPoint:r,CURVE:e,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function Ai(e){let{CURVE:t,curveOpts:r,hash:n,eddsaOpts:o}=Su(e),s=wu(t,r),i=Eu(s,n,o);return vu(e,i)}var Au=BigInt(0),Ft=BigInt(1),Ii=BigInt(2),Ed=BigInt(3),Iu=BigInt(5),Bu=BigInt(8),Re=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),cr={p:Re,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Bu,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function _u(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),s=Re,a=e*e%s*e%s,c=Z(a,Ii,s)*a%s,f=Z(c,Ft,s)*e%s,l=Z(f,Iu,s)*f%s,h=Z(l,t,s)*l%s,u=Z(h,r,s)*h%s,p=Z(u,n,s)*u%s,d=Z(p,o,s)*p%s,E=Z(d,o,s)*p%s,v=Z(E,t,s)*l%s;return{pow_p_5_8:Z(v,Ii,s)*e%s,b2:a}}function Cu(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}var co=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function lo(e,t){let r=Re,n=X(t*t*t,r),o=X(n*n*t,r),s=_u(e*o).pow_p_5_8,i=X(e*n*s,r),a=X(t*i*i,r),c=i,f=X(i*co,r),l=a===e,h=a===X(-e,r),u=a===X(-e*co,r);return l&&(i=c),(h||u)&&(i=f),Ht(i,r)&&(i=X(-i,r)),{isValid:l||h,value:i}}var ue=Et(cr.p,{isLE:!0}),Tu=Et(cr.n,{isLE:!0}),Du={...cr,Fp:ue,hash:ni,adjustScalarBytes:Cu,uvRatio:lo},Zt=Ai(Du);var uo=co,Pu=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Lu=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Ou=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Uu=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Bi=e=>lo(Ft,e),Ku=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),fo=e=>Zt.Point.Fp.create(Vt(e)&Ku);function _i(e){let{d:t}=cr,r=Re,n=g=>ue.create(g),o=n(uo*e*e),s=n((o+Ft)*Ou),i=BigInt(-1),a=n((i-t*o)*n(o+t)),{isValid:c,value:f}=lo(s,a),l=n(f*e);Ht(l,r)||(l=n(-l)),c||(f=l),c||(i=o);let h=n(i*(o-Ft)*Uu-a),u=f*f,p=n((f+f)*a),d=n(h*Pu),E=n(Ft-u),v=n(Ft+u);return new Zt.Point(n(p*v),n(E*d),n(d*v),n(p*E))}function Ru(e){xt(e,64);let t=fo(e.subarray(0,32)),r=_i(t),n=fo(e.subarray(32,64)),o=_i(n);return new Gt(r.add(o))}var Gt=class e extends Rr{constructor(t){super(t)}static fromAffine(t){return new e(Zt.Point.fromAffine(t))}assertSame(t){if(!(t instanceof e))throw new Error("RistrettoPoint expected")}init(t){return new e(t)}static hashToCurve(t){return Ru(z("ristrettoHash",t,64))}static fromBytes(t){xt(t,32);let{a:r,d:n}=cr,o=Re,s=D=>ue.create(D),i=fo(t);if(!si(ue.toBytes(i),t)||Ht(i,o))throw new Error("invalid ristretto255 encoding 1");let a=s(i*i),c=s(Ft+r*a),f=s(Ft-r*a),l=s(c*c),h=s(f*f),u=s(r*n*l-h),{isValid:p,value:d}=Bi(s(u*h)),E=s(d*f),v=s(d*E*u),g=s((i+i)*E);Ht(g,o)&&(g=s(-g));let A=s(c*v),w=s(g*A);if(!p||Ht(w,o)||A===Au)throw new Error("invalid ristretto255 encoding 2");return new e(new Zt.Point(g,A,Ft,w))}static fromHex(t){return e.fromBytes(z("ristrettoHex",t,32))}static msm(t,r){return Ke(e,Zt.Point.Fn,t,r)}toBytes(){let{X:t,Y:r,Z:n,T:o}=this.ep,s=Re,i=v=>ue.create(v),a=i(i(n+r)*i(n-r)),c=i(t*r),f=i(c*c),{value:l}=Bi(i(a*f)),h=i(l*a),u=i(l*c),p=i(h*u*o),d;if(Ht(o*p,s)){let v=i(r*uo),g=i(t*uo);t=v,r=g,d=i(h*Lu)}else d=u;Ht(t*p,s)&&(r=i(-r));let E=i((n-r)*d);return Ht(E,s)&&(E=i(-E)),ue.toBytes(E)}equals(t){this.assertSame(t);let{X:r,Y:n}=this.ep,{X:o,Y:s}=t.ep,i=f=>ue.create(f),a=i(r*s)===i(n*o),c=i(n*s)===i(r*o);return a||c}is0(){return this.equals(e.ZERO)}};Gt.BASE=new Gt(Zt.Point.BASE);Gt.ZERO=new Gt(Zt.Point.ZERO);Gt.Fp=ue;Gt.Fn=Tu;var ur=class extends Error{constructor(t="An error occurred while verifying a message"){super(t),this.name="VerificationError"}},Nr=class extends Error{constructor(t="Missing Web Crypto API"){super(t),this.name="WebCryptoMissingError"}};var Ci={get(e=globalThis){let t=e.crypto;if(t?.subtle==null)throw new Nr("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}};var It=Ci;var kr=32;var ho,Nu=(async()=>{try{return await It.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function ku(e,t,r){if(e.buffer instanceof ArrayBuffer){let n=await It.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await It.get().subtle.verify({name:"Ed25519"},n,t,r instanceof Uint8Array?r:r.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function Mu(e,t,r){return Zt.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}async function Ti(e,t,r){return ho==null&&(ho=await Nu),ho?ku(e,t,r):Mu(e,t,r)}function Mr(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}var qr=class{type="Ed25519";raw;constructor(t){this.raw=po(t,kr)}toMultihash(){return _t.digest(re(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return G.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}verify(t,r,n){n?.signal?.throwIfAborted();let o=Ti(this.raw,r,t);return Mr(o)?o.then(s=>(n?.signal?.throwIfAborted(),s)):o}};function mo(e){return e=po(e,kr),new qr(e)}function po(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new et(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}var Vu=Math.pow(2,7),Hu=Math.pow(2,14),zu=Math.pow(2,21),yo=Math.pow(2,28),bo=Math.pow(2,35),go=Math.pow(2,42),xo=Math.pow(2,49),H=128,ft=127;function Bt(e){if(e<Vu)return 1;if(e<Hu)return 2;if(e<zu)return 3;if(e<yo)return 4;if(e<bo)return 5;if(e<go)return 6;if(e<xo)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Ne(e,t,r=0){switch(Bt(e)){case 8:t[r++]=e&255|H,e/=128;case 7:t[r++]=e&255|H,e/=128;case 6:t[r++]=e&255|H,e/=128;case 5:t[r++]=e&255|H,e/=128;case 4:t[r++]=e&255|H,e>>>=7;case 3:t[r++]=e&255|H,e>>>=7;case 2:t[r++]=e&255|H,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function Fu(e,t,r=0){switch(Bt(e)){case 8:t.set(r++,e&255|H),e/=128;case 7:t.set(r++,e&255|H),e/=128;case 6:t.set(r++,e&255|H),e/=128;case 5:t.set(r++,e&255|H),e/=128;case 4:t.set(r++,e&255|H),e>>>=7;case 3:t.set(r++,e&255|H),e>>>=7;case 2:t.set(r++,e&255|H),e>>>=7;case 1:{t.set(r++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function wo(e,t){let r=e[t],n=0;if(n+=r&ft,r<H||(r=e[t+1],n+=(r&ft)<<7,r<H)||(r=e[t+2],n+=(r&ft)<<14,r<H)||(r=e[t+3],n+=(r&ft)<<21,r<H)||(r=e[t+4],n+=(r&ft)*yo,r<H)||(r=e[t+5],n+=(r&ft)*bo,r<H)||(r=e[t+6],n+=(r&ft)*go,r<H)||(r=e[t+7],n+=(r&ft)*xo,r<H))return n;throw new RangeError("Could not decode varint")}function Zu(e,t){let r=e.get(t),n=0;if(n+=r&ft,r<H||(r=e.get(t+1),n+=(r&ft)<<7,r<H)||(r=e.get(t+2),n+=(r&ft)<<14,r<H)||(r=e.get(t+3),n+=(r&ft)<<21,r<H)||(r=e.get(t+4),n+=(r&ft)*yo,r<H)||(r=e.get(t+5),n+=(r&ft)*bo,r<H)||(r=e.get(t+6),n+=(r&ft)*go,r<H)||(r=e.get(t+7),n+=(r&ft)*xo,r<H))return n;throw new RangeError("Could not decode varint")}function Vr(e,t,r=0){return t==null&&(t=bt(Bt(e))),t instanceof Uint8Array?Ne(e,t,r):Fu(e,t,r)}function Eo(e,t=0){return e instanceof Uint8Array?wo(e,t):Zu(e,t)}var So=new Float32Array([-0]),fe=new Uint8Array(So.buffer);function Li(e,t,r){So[0]=e,t[r]=fe[0],t[r+1]=fe[1],t[r+2]=fe[2],t[r+3]=fe[3]}function Oi(e,t){return fe[0]=e[t],fe[1]=e[t+1],fe[2]=e[t+2],fe[3]=e[t+3],So[0]}var vo=new Float64Array([-0]),lt=new Uint8Array(vo.buffer);function Ui(e,t,r){vo[0]=e,t[r]=lt[0],t[r+1]=lt[1],t[r+2]=lt[2],t[r+3]=lt[3],t[r+4]=lt[4],t[r+5]=lt[5],t[r+6]=lt[6],t[r+7]=lt[7]}function Ki(e,t){return lt[0]=e[t],lt[1]=e[t+1],lt[2]=e[t+2],lt[3]=e[t+3],lt[4]=e[t+4],lt[5]=e[t+5],lt[6]=e[t+6],lt[7]=e[t+7],vo[0]}var Gu=BigInt(Number.MAX_SAFE_INTEGER),$u=BigInt(Number.MIN_SAFE_INTEGER),St=class e{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){let t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return ge;if(t<Gu&&t>$u)return this.fromNumber(Number(t));let r=t<0n;r&&(t=-t);let n=t>>32n,o=t-(n<<32n);return r&&(n=~n|0n,o=~o|0n,++o>Ri&&(o=0n,++n>Ri&&(n=0n))),new e(Number(o),Number(n))}static fromNumber(t){if(t===0)return ge;let r=t<0;r&&(t=-t);let n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new e(n,o)}static from(t){return typeof t=="number"?e.fromNumber(t):typeof t=="bigint"?e.fromBigInt(t):typeof t=="string"?e.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new e(t.low>>>0,t.high>>>0):ge}},ge=new St(0,0);ge.toBigInt=function(){return 0n};ge.zzEncode=ge.zzDecode=function(){return this};ge.length=function(){return 1};var Ri=4294967296n;function Ni(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function ki(e,t,r){if(r-t<1)return"";let o,s=[],i=0,a;for(;t<r;)a=e[t++],a<128?s[i++]=a:a>191&&a<224?s[i++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[i++]=55296+(a>>10),s[i++]=56320+(a&1023)):s[i++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,i>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o!=null?(i>0&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))}function Ao(e,t,r){let n=r,o,s;for(let i=0;i<e.length;++i)o=e.charCodeAt(i),o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++i,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128);return r-n}function Tt(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Hr(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}var Io=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Tt(this,10);return t}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Tt(this,4);return Hr(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Tt(this,4);return Hr(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Tt(this,4);let t=Oi(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw Tt(this,4);let t=Ki(this.buf,this.pos);return this.pos+=8,t}bytes(){let t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Tt(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let t=this.bytes();return ki(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Tt(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Tt(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){let t=new St(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Tt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw Tt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Tt(this,8);let t=Hr(this.buf,this.pos+=4),r=Hr(this.buf,this.pos+=4);return new St(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let t=wo(this.buf,this.pos);return this.pos+=Bt(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Bo(e){return new Io(e instanceof Uint8Array?e:e.subarray())}function $t(e,t,r){let n=Bo(e);return t.decode(n,void 0,r)}function _o(e){let t=e??8192,r=t>>>1,n,o=t;return function(i){if(i<1||i>r)return bt(i);o+i>t&&(n=bt(t),o=0);let a=n.subarray(o,o+=i);return(o&7)!==0&&(o=(o|7)+1),a}}var xe=class{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}};function Co(){}var Do=class{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}},ju=_o();function Yu(e){return globalThis.Buffer!=null?bt(e):ju(e)}var lr=class{len;head;tail;states;constructor(){this.len=0,this.head=new xe(Co,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new xe(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new Po((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(zr,10,St.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){let r=St.fromBigInt(t);return this._push(zr,r.length(),r)}uint64Number(t){return this._push(Ne,Bt(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){let r=St.fromBigInt(t).zzEncode();return this._push(zr,r.length(),r)}sint64Number(t){let r=St.fromNumber(t).zzEncode();return this._push(zr,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(To,1,t?1:0)}fixed32(t){return this._push(fr,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){let r=St.fromBigInt(t);return this._push(fr,4,r.lo)._push(fr,4,r.hi)}fixed64Number(t){let r=St.fromNumber(t);return this._push(fr,4,r.lo)._push(fr,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(Li,4,t)}double(t){return this._push(Ui,8,t)}bytes(t){let r=t.length>>>0;return r===0?this._push(To,1,0):this.uint32(r)._push(Xu,r,t)}string(t){let r=Ni(t);return r!==0?this.uint32(r)._push(Ao,r,t):this._push(To,1,0)}fork(){return this.states=new Do(this),this.head=this.tail=new xe(Co,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new xe(Co,0,0),this.len=0),this}ldelim(){let t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next,r=Yu(this.len),n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}};function To(e,t,r){t[r]=e&255}function Wu(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}var Po=class extends xe{next;constructor(t,r){super(Wu,t,r),this.next=void 0}};function zr(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function fr(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Xu(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(lr.prototype.bytes=function(e){let t=e.length>>>0;return this.uint32(t),t>0&&this._push(Ju,t,e),this},lr.prototype.string=function(e){let t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(Qu,t,e),this});function Ju(e,t,r){t.set(e,r)}function Qu(e,t,r){e.length<40?Ao(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(V(e),r)}function Lo(){return new lr}function jt(e,t){let r=Lo();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var ke;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(ke||(ke={}));function Fr(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function Oo(e){function t(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}let r=function(s,i){let a=t(s);i.int32(a)},n=function(s){let i=s.int32();return t(i)};return Fr("enum",ke.VARINT,r,n)}function Yt(e,t){return Fr("message",ke.LENGTH_DELIMITED,e,t)}var Zr=class extends Error{code="ERR_MAX_LENGTH";name="MaxLengthError"};var J;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(J||(J={}));var Uo;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Uo||(Uo={}));(function(e){e.codec=()=>Oo(Uo)})(J||(J={}));var Lt;(function(e){let t;e.codec=()=>(t==null&&(t=Yt((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),J.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=J.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),t),e.encode=r=>jt(r,e.codec()),e.decode=(r,n)=>$t(r,e.codec(),n)})(Lt||(Lt={}));var Ko;(function(e){let t;e.codec=()=>(t==null&&(t=Yt((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),J.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=J.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),t),e.encode=r=>jt(r,e.codec()),e.decode=(r,n)=>$t(r,e.codec(),n)})(Ko||(Ko={}));var dr={};yt(dr,{MAX_RSA_KEY_SIZE:()=>Ro,generateRSAKeyPair:()=>Fi,jwkToJWKKeyPair:()=>Zi,jwkToPkcs1:()=>nf,jwkToPkix:()=>qo,jwkToRSAPrivateKey:()=>Fo,pkcs1MessageToJwk:()=>ko,pkcs1MessageToRSAPrivateKey:()=>Vo,pkcs1ToJwk:()=>rf,pkcs1ToRSAPrivateKey:()=>zi,pkixMessageToJwk:()=>Mo,pkixMessageToRSAPublicKey:()=>zo,pkixToJwk:()=>of,pkixToRSAPublicKey:()=>Ho});var Gr=Pr;var Me=class{type="RSA";jwk;_raw;_multihash;constructor(t,r){this.jwk=t,this._multihash=r}get raw(){return this._raw==null&&(this._raw=dr.jwkToPkix(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return Q.createV1(114,this._multihash)}toString(){return G.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}verify(t,r,n){return Hi(this.jwk,r,t,n)}},hr=class{type="RSA";jwk;_raw;publicKey;constructor(t,r){this.jwk=t,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=dr.jwkToPkcs1(this.jwk)),this._raw}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}sign(t,r){return Vi(this.jwk,t,r)}};var Ro=8192,No=18,tf=1062,ef=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function rf(e){let t=Kt(e);return ko(t)}function ko(e){return{n:M(e[1],"base64url"),e:M(e[2],"base64url"),d:M(e[3],"base64url"),p:M(e[4],"base64url"),q:M(e[5],"base64url"),dp:M(e[6],"base64url"),dq:M(e[7],"base64url"),qi:M(e[8],"base64url"),kty:"RSA"}}function nf(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new et("JWK was missing components");return ee([gt(Uint8Array.from([0])),gt(V(e.n,"base64url")),gt(V(e.e,"base64url")),gt(V(e.d,"base64url")),gt(V(e.p,"base64url")),gt(V(e.q,"base64url")),gt(V(e.dp,"base64url")),gt(V(e.dq,"base64url")),gt(V(e.qi,"base64url"))]).subarray()}function of(e){let t=Kt(e,{offset:0});return Mo(t)}function Mo(e){let t=Kt(e[1],{offset:0});return{kty:"RSA",n:M(t[0],"base64url"),e:M(t[1],"base64url")}}function qo(e){if(e.n==null||e.e==null)throw new et("JWK was missing components");return ee([ef,Br(ee([gt(V(e.n,"base64url")),gt(V(e.e,"base64url"))]))]).subarray()}function zi(e){let t=Kt(e);return Vo(t)}function Vo(e){let t=ko(e);return Fo(t)}function Ho(e,t){if(e.byteLength>=tf)throw new Ee("Key size is too large");let r=Kt(e,{offset:0});return zo(r,e,t)}function zo(e,t,r){let n=Mo(e);if(r==null){let o=Gr(Lt.encode({Type:J.RSA,Data:t}));r=Dt(No,o)}return new Me(n,r)}function Fo(e){if($i(e)>Ro)throw new et("Key size is too large");let t=Zi(e),r=Gr(Lt.encode({Type:J.RSA,Data:qo(t.publicKey)})),n=Dt(No,r);return new hr(t.privateKey,new Me(t.publicKey,n))}async function Fi(e){if(e>Ro)throw new et("Key size is too large");let t=await Gi(e),r=Gr(Lt.encode({Type:J.RSA,Data:qo(t.publicKey)})),n=Dt(No,r);return new hr(t.privateKey,new Me(t.publicKey,n))}function Zi(e){if(e==null)throw new et("Missing key parameter");return{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}}}async function Gi(e,t){let r=await It.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);t?.signal?.throwIfAborted();let n=await sf(r,t);return{privateKey:n[0],publicKey:n[1]}}async function Vi(e,t,r){let n=await It.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);r?.signal?.throwIfAborted();let o=await It.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,t instanceof Uint8Array?t:t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(o,0,o.byteLength)}async function Hi(e,t,r,n){let o=await It.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);n?.signal?.throwIfAborted();let s=await It.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,t,r instanceof Uint8Array?r:r.subarray());return n?.signal?.throwIfAborted(),s}async function sf(e,t){if(e.privateKey==null||e.publicKey==null)throw new et("Private and public key are required");let r=await Promise.all([It.get().subtle.exportKey("jwk",e.privateKey),It.get().subtle.exportKey("jwk",e.publicKey)]);return t?.signal?.throwIfAborted(),r}function $i(e){if(e.kty!=="RSA")throw new et("invalid key type");if(e.n==null)throw new et("invalid key modulus");return V(e.n,"base64url").length*8}var $r=class extends Ce{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,_r(t);let n=tr(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(n.length>o?t.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),kt(s)}update(t){return Te(this),this.iHash.update(t),this}digestInto(t){Te(this),xt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Zo=(e,t,r)=>new $r(e,t).update(r).digest();Zo.create=(e,t)=>new $r(e,t);var ji=(e,t)=>(e+(e>=0?t:-t)/Yi)/t;function af(e,t,r){let[[n,o],[s,i]]=t,a=ji(i*e,r),c=ji(-o*e,r),f=e-a*n-c*s,l=-a*o-c*i,h=f<Xt,u=l<Xt;h&&(f=-f),u&&(l=-l);let p=ie(Math.ceil(Or(r)/2))+Ve;if(f<Xt||f>=p||l<Xt||l>=p)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:h,k1:f,k2neg:u,k2:l}}function $o(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Go(e,t){let r={};for(let n of Object.keys(t))r[n]=e[n]===void 0?t[n]:e[n];return qt(r.lowS,"lowS"),qt(r.prehash,"prehash"),r.format!==void 0&&$o(r.format),r}var jo=class extends Error{constructor(t=""){super(t)}},Wt={Err:jo,_tlv:{encode:(e,t)=>{let{Err:r}=Wt;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=or(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?or(o.length/2|128):"";return or(e)+s+o+t},decode(e,t){let{Err:r}=Wt,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let o=t[n++],s=!!(o&128),i=0;if(!s)i=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let f=t.subarray(n,n+c);if(f.length!==c)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let l of f)i=i<<8|l;if(n+=c,i<128)throw new r("tlv.decode(long): not minimal encoding")}let a=t.subarray(n,n+i);if(a.length!==i)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+i)}}},_int:{encode(e){let{Err:t}=Wt;if(e<Xt)throw new t("integer: negative integers are not allowed");let r=or(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=Wt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Pe(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=Wt,o=z("signature",e),{v:s,l:i}=n.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,s),{v:f,l}=n.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(e){let{_tlv:t,_int:r}=Wt,n=t.encode(2,r.encode(e.r)),o=t.encode(2,r.encode(e.s)),s=n+o;return t.encode(48,s)}},Xt=BigInt(0),Ve=BigInt(1),Yi=BigInt(2),jr=BigInt(3),cf=BigInt(4);function qe(e,t){let{BYTES:r}=e,n;if(typeof t=="bigint")n=t;else{let o=z("private key",t);try{n=e.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof t}`)}}if(!e.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function uf(e,t={}){let r=Kr("weierstrass",e,t),{Fp:n,Fn:o}=r,s=r.CURVE,{h:i,n:a}=s;ae(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:c}=t;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let f=Xi(n,o);function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(T,b,m){let{x:y,y:S}=b.toAffine(),I=n.toBytes(y);if(qt(m,"isCompressed"),m){l();let P=!n.isOdd(S);return dt(Wi(P),I)}else return dt(Uint8Array.of(4),I,n.toBytes(S))}function u(T){wt(T,void 0,"Point");let{publicKey:b,publicKeyUncompressed:m}=f,y=T.length,S=T[0],I=T.subarray(1);if(y===b&&(S===2||S===3)){let P=n.fromBytes(I);if(!n.isValid(P))throw new Error("bad point: is not on curve, wrong x");let B=E(P),_;try{_=n.sqrt(B)}catch($){let F=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+F)}l();let L=n.isOdd(_);return(S&1)===1!==L&&(_=n.neg(_)),{x:P,y:_}}else if(y===m&&S===4){let P=n.BYTES,B=n.fromBytes(I.subarray(0,P)),_=n.fromBytes(I.subarray(P,P*2));if(!v(B,_))throw new Error("bad point: is not on curve");return{x:B,y:_}}else throw new Error(`bad point: got length ${y}, expected compressed=${b} or uncompressed=${m}`)}let p=t.toBytes||h,d=t.fromBytes||u;function E(T){let b=n.sqr(T),m=n.mul(b,T);return n.add(n.add(m,n.mul(T,s.a)),s.b)}function v(T,b){let m=n.sqr(b),y=E(T);return n.eql(m,y)}if(!v(s.Gx,s.Gy))throw new Error("bad curve params: generator point");let g=n.mul(n.pow(s.a,jr),cf),A=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(g,A)))throw new Error("bad curve params: a or b");function w(T,b,m=!1){if(!n.isValid(b)||m&&n.is0(b))throw new Error(`bad point coordinate ${T}`);return b}function D(T){if(!(T instanceof x))throw new Error("ProjectivePoint expected")}function O(T){if(!c||!c.basises)throw new Error("no endo");return af(T,c.basises,o.ORDER)}let k=Le((T,b)=>{let{X:m,Y:y,Z:S}=T;if(n.eql(S,n.ONE))return{x:m,y};let I=T.is0();b==null&&(b=I?n.ONE:n.inv(S));let P=n.mul(m,b),B=n.mul(y,b),_=n.mul(S,b);if(I)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:P,y:B}}),N=Le(T=>{if(T.is0()){if(t.allowInfinityPoint&&!n.is0(T.Y))return;throw new Error("bad point: ZERO")}let{x:b,y:m}=T.toAffine();if(!n.isValid(b)||!n.isValid(m))throw new Error("bad point: x or y not field elements");if(!v(b,m))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(T,b,m,y,S){return m=new x(n.mul(m.X,T),m.Y,m.Z),b=ar(y,b),m=ar(S,m),b.add(m)}class x{constructor(b,m,y){this.X=w("x",b),this.Y=w("y",m,!0),this.Z=w("z",y),Object.freeze(this)}static CURVE(){return s}static fromAffine(b){let{x:m,y}=b||{};if(!b||!n.isValid(m)||!n.isValid(y))throw new Error("invalid affine point");if(b instanceof x)throw new Error("projective point not allowed");return n.is0(m)&&n.is0(y)?x.ZERO:new x(m,y,n.ONE)}static fromBytes(b){let m=x.fromAffine(d(wt(b,void 0,"point")));return m.assertValidity(),m}static fromHex(b){return x.fromBytes(z("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,m=!0){return K.createCache(this,b),m||this.multiply(jr),this}assertValidity(){N(this)}hasEvenY(){let{y:b}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(b)}equals(b){D(b);let{X:m,Y:y,Z:S}=this,{X:I,Y:P,Z:B}=b,_=n.eql(n.mul(m,B),n.mul(I,S)),L=n.eql(n.mul(y,B),n.mul(P,S));return _&&L}negate(){return new x(this.X,n.neg(this.Y),this.Z)}double(){let{a:b,b:m}=s,y=n.mul(m,jr),{X:S,Y:I,Z:P}=this,B=n.ZERO,_=n.ZERO,L=n.ZERO,R=n.mul(S,S),$=n.mul(I,I),F=n.mul(P,P),q=n.mul(S,I);return q=n.add(q,q),L=n.mul(S,P),L=n.add(L,L),B=n.mul(b,L),_=n.mul(y,F),_=n.add(B,_),B=n.sub($,_),_=n.add($,_),_=n.mul(B,_),B=n.mul(q,B),L=n.mul(y,L),F=n.mul(b,F),q=n.sub(R,F),q=n.mul(b,q),q=n.add(q,L),L=n.add(R,R),R=n.add(L,R),R=n.add(R,F),R=n.mul(R,q),_=n.add(_,R),F=n.mul(I,P),F=n.add(F,F),R=n.mul(F,q),B=n.sub(B,R),L=n.mul(F,$),L=n.add(L,L),L=n.add(L,L),new x(B,_,L)}add(b){D(b);let{X:m,Y:y,Z:S}=this,{X:I,Y:P,Z:B}=b,_=n.ZERO,L=n.ZERO,R=n.ZERO,$=s.a,F=n.mul(s.b,jr),q=n.mul(m,I),j=n.mul(y,P),tt=n.mul(S,B),mt=n.add(m,y),Y=n.add(I,P);mt=n.mul(mt,Y),Y=n.add(q,j),mt=n.sub(mt,Y),Y=n.add(m,S);let ut=n.add(I,B);return Y=n.mul(Y,ut),ut=n.add(q,tt),Y=n.sub(Y,ut),ut=n.add(y,S),_=n.add(P,B),ut=n.mul(ut,_),_=n.add(j,tt),ut=n.sub(ut,_),R=n.mul($,Y),_=n.mul(F,tt),R=n.add(_,R),_=n.sub(j,R),R=n.add(j,R),L=n.mul(_,R),j=n.add(q,q),j=n.add(j,q),tt=n.mul($,tt),Y=n.mul(F,Y),j=n.add(j,tt),tt=n.sub(q,tt),tt=n.mul($,tt),Y=n.add(Y,tt),q=n.mul(j,Y),L=n.add(L,q),q=n.mul(ut,Y),_=n.mul(mt,_),_=n.sub(_,q),q=n.mul(mt,j),R=n.mul(ut,R),R=n.add(R,q),new x(_,L,R)}subtract(b){return this.add(b.negate())}is0(){return this.equals(x.ZERO)}multiply(b){let{endo:m}=t;if(!o.isValidNot0(b))throw new Error("invalid scalar: out of range");let y,S,I=P=>K.cached(this,P,B=>zt(x,B));if(m){let{k1neg:P,k1:B,k2neg:_,k2:L}=O(b),{p:R,f:$}=I(B),{p:F,f:q}=I(L);S=$.add(q),y=U(m.beta,R,F,P,_)}else{let{p:P,f:B}=I(b);y=P,S=B}return zt(x,[y,S])[0]}multiplyUnsafe(b){let{endo:m}=t,y=this;if(!o.isValid(b))throw new Error("invalid scalar: out of range");if(b===Xt||y.is0())return x.ZERO;if(b===Ve)return y;if(K.hasCache(this))return this.multiply(b);if(m){let{k1neg:S,k1:I,k2neg:P,k2:B}=O(b),{p1:_,p2:L}=vi(x,y,I,B);return U(m.beta,_,L,S,P)}else return K.unsafe(y,b)}multiplyAndAddUnsafe(b,m,y){let S=this.multiplyUnsafe(m).add(b.multiplyUnsafe(y));return S.is0()?void 0:S}toAffine(b){return k(this,b)}isTorsionFree(){let{isTorsionFree:b}=t;return i===Ve?!0:b?b(x,this):K.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:b}=t;return i===Ve?this:b?b(x,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(b=!0){return qt(b,"isCompressed"),this.assertValidity(),p(x,this,b)}toHex(b=!0){return At(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return zt(x,b)}static msm(b,m){return Ke(x,o,b,m)}static fromPrivateKey(b){return x.BASE.multiply(qe(o,b))}}x.BASE=new x(s.Gx,s.Gy,n.ONE),x.ZERO=new x(n.ZERO,n.ONE,n.ZERO),x.Fp=n,x.Fn=o;let C=o.BITS,K=new Ue(x,t.endo?Math.ceil(C/2):C);return x.BASE.precompute(8),x}function Wi(e){return Uint8Array.of(e?2:3)}function Xi(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function ff(e,t={}){let{Fn:r}=e,n=t.randomBytes||De,o=Object.assign(Xi(e.Fp,r),{seed:ro(r.ORDER)});function s(p){try{return!!qe(r,p)}catch{return!1}}function i(p,d){let{publicKey:E,publicKeyUncompressed:v}=o;try{let g=p.length;return d===!0&&g!==E||d===!1&&g!==v?!1:!!e.fromBytes(p)}catch{return!1}}function a(p=n(o.seed)){return no(wt(p,o.seed,"seed"),r.ORDER)}function c(p,d=!0){return e.BASE.multiply(qe(r,p)).toBytes(d)}function f(p){let d=a(p);return{secretKey:d,publicKey:c(d)}}function l(p){if(typeof p=="bigint")return!1;if(p instanceof e)return!0;let{secretKey:d,publicKey:E,publicKeyUncompressed:v}=o;if(r.allowedLengths||d===E)return;let g=z("key",p).length;return g===E||g===v}function h(p,d,E=!0){if(l(p)===!0)throw new Error("first arg must be private key");if(l(d)===!1)throw new Error("second arg must be public key");let v=qe(r,p);return e.fromHex(d).multiply(v).toBytes(E)}return Object.freeze({getPublicKey:c,getSharedSecret:h,keygen:f,Point:e,utils:{isValidSecretKey:s,isValidPublicKey:i,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:p=>qe(r,p),precompute(p=8,d=e.BASE){return d.precompute(p,!1)}},lengths:o})}function lf(e,t,r={}){_r(t),ae(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=r.randomBytes||De,o=r.hmac||((m,...y)=>Zo(t,m,dt(...y))),{Fp:s,Fn:i}=e,{ORDER:a,BITS:c}=i,{keygen:f,getPublicKey:l,getSharedSecret:h,utils:u,lengths:p}=ff(e,r),d={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},E="compact";function v(m){let y=a>>Ve;return m>y}function g(m,y){if(!i.isValidNot0(y))throw new Error(`invalid signature ${m}: out of range 1..Point.Fn.ORDER`);return y}function A(m,y){$o(y);let S=p.signature,I=y==="compact"?S:y==="recovered"?S+1:void 0;return wt(m,I,`${y} signature`)}class w{constructor(y,S,I){this.r=g("r",y),this.s=g("s",S),I!=null&&(this.recovery=I),Object.freeze(this)}static fromBytes(y,S=E){A(y,S);let I;if(S==="der"){let{r:L,s:R}=Wt.toSig(wt(y));return new w(L,R)}S==="recovered"&&(I=y[0],S="compact",y=y.subarray(1));let P=i.BYTES,B=y.subarray(0,P),_=y.subarray(P,P*2);return new w(i.fromBytes(B),i.fromBytes(_),I)}static fromHex(y,S){return this.fromBytes(de(y),S)}addRecoveryBit(y){return new w(this.r,this.s,y)}recoverPublicKey(y){let S=s.ORDER,{r:I,s:P,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(a*Yi<S&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");let L=B===2||B===3?I+a:I;if(!s.isValid(L))throw new Error("recovery id 2 or 3 invalid");let R=s.toBytes(L),$=e.fromBytes(dt(Wi((B&1)===0),R)),F=i.inv(L),q=O(z("msgHash",y)),j=i.create(-q*F),tt=i.create(P*F),mt=e.BASE.multiplyUnsafe(j).add($.multiplyUnsafe(tt));if(mt.is0())throw new Error("point at infinify");return mt.assertValidity(),mt}hasHighS(){return v(this.s)}toBytes(y=E){if($o(y),y==="der")return de(Wt.hexFromSig(this));let S=i.toBytes(this.r),I=i.toBytes(this.s);if(y==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return dt(Uint8Array.of(this.recovery),S,I)}return dt(S,I)}toHex(y){return At(this.toBytes(y))}assertValidity(){}static fromCompact(y){return w.fromBytes(z("sig",y),"compact")}static fromDER(y){return w.fromBytes(z("sig",y),"der")}normalizeS(){return this.hasHighS()?new w(this.r,i.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return At(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return At(this.toBytes("compact"))}}let D=r.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");let S=Pe(y),I=y.length*8-c;return I>0?S>>BigInt(I):S},O=r.bits2int_modN||function(y){return i.create(D(y))},k=ie(c);function N(m){return sr("num < 2^"+c,m,Xt,k),i.toBytes(m)}function U(m,y){return wt(m,void 0,"message"),y?wt(t(m),void 0,"prehashed message"):m}function x(m,y,S){if(["recovered","canonical"].some(j=>j in S))throw new Error("sign() legacy options not supported");let{lowS:I,prehash:P,extraEntropy:B}=Go(S,d);m=U(m,P);let _=O(m),L=qe(i,y),R=[N(L),N(_)];if(B!=null&&B!==!1){let j=B===!0?n(p.secretKey):B;R.push(z("extraEntropy",j))}let $=dt(...R),F=_;function q(j){let tt=D(j);if(!i.isValidNot0(tt))return;let mt=i.inv(tt),Y=e.BASE.multiply(tt).toAffine(),ut=i.create(Y.x);if(ut===Xt)return;let Er=i.create(mt*i.create(F+ut*L));if(Er===Xt)return;let ps=(Y.x===ut?0:2)|Number(Y.y&Ve),ms=Er;return I&&v(Er)&&(ms=i.neg(Er),ps^=1),new w(ut,ms,ps)}return{seed:$,k2sig:q}}function C(m,y,S={}){m=z("message",m);let{seed:I,k2sig:P}=x(m,y,S);return ai(t.outputLen,i.BYTES,o)(I,P)}function K(m){let y,S=typeof m=="string"||Nt(m),I=!S&&m!==null&&typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!S&&!I)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(I)y=new w(m.r,m.s);else if(S){try{y=w.fromBytes(z("sig",m),"der")}catch(P){if(!(P instanceof Wt.Err))throw P}if(!y)try{y=w.fromBytes(z("sig",m),"compact")}catch{return!1}}return y||!1}function T(m,y,S,I={}){let{lowS:P,prehash:B,format:_}=Go(I,d);if(S=z("publicKey",S),y=U(z("message",y),B),"strict"in I)throw new Error("options.strict was renamed to lowS");let L=_===void 0?K(m):w.fromBytes(z("sig",m),_);if(L===!1)return!1;try{let R=e.fromBytes(S);if(P&&L.hasHighS())return!1;let{r:$,s:F}=L,q=O(y),j=i.inv(F),tt=i.create(q*j),mt=i.create($*j),Y=e.BASE.multiplyUnsafe(tt).add(R.multiplyUnsafe(mt));return Y.is0()?!1:i.create(Y.x)===$}catch{return!1}}function b(m,y,S={}){let{prehash:I}=Go(S,d);return y=U(y,I),w.fromBytes(m,"recovered").recoverPublicKey(y).toBytes()}return Object.freeze({keygen:f,getPublicKey:l,getSharedSecret:h,utils:u,lengths:p,Point:e,sign:C,verify:T,recoverPublicKey:b,Signature:w,hash:t})}function hf(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(i=>Math.ceil(i/2)))):void 0,o=Et(t.n,{BITS:e.nBitLength,allowedLengths:n,modFromBytes:e.wrapPrivateKey}),s={Fp:r,Fn:o,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function df(e){let{CURVE:t,curveOpts:r}=hf(e),n={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:n}}function pf(e,t){let r=t.Point;return Object.assign({},t,{ProjectivePoint:r,CURVE:Object.assign({},e,Ur(r.Fn.ORDER,r.Fn.BITS))})}function Ji(e){let{CURVE:t,curveOpts:r,hash:n,ecdsaOpts:o}=df(e),s=uf(t,r),i=lf(s,n,o);return pf(e,i)}function Qi(e,t){let r=n=>Ji({...e,hash:n});return{...r(t),create:r}}var Wo={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},mf={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]};var ta=BigInt(2);function yf(e){let t=Wo.p,r=BigInt(3),n=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),f=e*e*e%t,l=f*f*e%t,h=Z(l,r,t)*l%t,u=Z(h,r,t)*l%t,p=Z(u,ta,t)*f%t,d=Z(p,o,t)*p%t,E=Z(d,s,t)*d%t,v=Z(E,a,t)*E%t,g=Z(v,c,t)*v%t,A=Z(g,a,t)*E%t,w=Z(A,r,t)*l%t,D=Z(w,i,t)*d%t,O=Z(D,n,t)*f%t,k=Z(O,ta,t);if(!Yo.eql(Yo.sqr(k),e))throw new Error("Cannot find square root");return k}var Yo=Et(Wo.p,{sqrt:yf}),He=Qi({...Wo,Fp:Yo,lowS:!0,endo:mf},Pr);function ea(e,t,r,n){let o=Ye.digest(r instanceof Uint8Array?r:r.subarray());if(Mr(o))return o.then(({digest:s})=>(n?.signal?.throwIfAborted(),He.verify(t,s,e))).catch(s=>{throw s.name==="AbortError"?s:new ur(String(s))});try{return n?.signal?.throwIfAborted(),He.verify(t,o.digest,e)}catch(s){throw new ur(String(s))}}var Yr=class{type="secp256k1";raw;_key;constructor(t){this._key=na(t),this.raw=ra(this._key)}toMultihash(){return _t.digest(re(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return G.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}verify(t,r,n){return ea(this._key,r,t,n)}};function Xo(e){return new Yr(e)}function ra(e){return He.ProjectivePoint.fromHex(e).toRawBytes(!0)}function na(e){try{return He.ProjectivePoint.fromHex(e),e}catch(t){throw new Ee(String(t))}}function oa(e,t){let{Type:r,Data:n}=Lt.decode(e),o=n??new Uint8Array;switch(r){case J.RSA:return Ho(o,t);case J.Ed25519:return mo(o);case J.secp256k1:return Xo(o);case J.ECDSA:return Hn(o);default:throw new Se}}function sa(e){let{Type:t,Data:r}=Lt.decode(e.digest),n=r??new Uint8Array;switch(t){case J.Ed25519:return mo(n);case J.secp256k1:return Xo(n);case J.ECDSA:return Hn(n);default:throw new Se}}function re(e){return Lt.encode({Type:J[e.type],Data:e.raw})}var pr;(function(e){let t;e.codec=()=>(t==null&&(t=Yt((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.payloadType!=null&&r.payloadType.byteLength>0&&(n.uint32(18),n.bytes(r.payloadType)),r.payload!=null&&r.payload.byteLength>0&&(n.uint32(26),n.bytes(r.payload)),r.signature!=null&&r.signature.byteLength>0&&(n.uint32(42),n.bytes(r.signature)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={publicKey:it(0),payloadType:it(0),payload:it(0),signature:it(0)},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.publicKey=r.bytes();break}case 2:{s.payloadType=r.bytes();break}case 3:{s.payload=r.bytes();break}case 5:{s.signature=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),t),e.encode=r=>jt(r,e.codec()),e.decode=(r,n)=>$t(r,e.codec(),n)})(pr||(pr={}));var Wr=class extends Error{constructor(t="Invalid signature"){super(t),this.name="InvalidSignatureError"}};var Xr=class e{static createFromProtobuf=t=>{let r=pr.decode(t),n=oa(r.publicKey);return new e({publicKey:n,payloadType:r.payloadType,payload:r.payload,signature:r.signature})};static seal=async(t,r,n)=>{if(r==null)throw new Error("Missing private key");let o=t.domain,s=t.codec,i=t.marshal(),a=ia(o,s,i),c=await r.sign(a.subarray(),n);return new e({publicKey:r.publicKey,payloadType:s,payload:i,signature:c})};static openAndCertify=async(t,r,n)=>{let o=e.createFromProtobuf(t);if(!await o.validate(r,n))throw new Wr("Envelope signature is not valid for the given domain");return o};publicKey;payloadType;payload;signature;marshaled;constructor(t){let{publicKey:r,payloadType:n,payload:o,signature:s}=t;this.publicKey=r,this.payloadType=n,this.payload=o,this.signature=s}marshal(){return this.marshaled==null&&(this.marshaled=pr.encode({publicKey:re(this.publicKey),payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(t){return t==null?!1:rt(this.marshal(),t.marshal())}async validate(t,r){let n=ia(t,this.payloadType,this.payload);return this.publicKey.verify(n.subarray(),this.signature,r)}},ia=(e,t,r)=>{let n=V(e),o=Vr(n.byteLength),s=Vr(t.length),i=Vr(r.length);return new ht(o,n,s,t,i,r)};var aa=Symbol.for("nodejs.util.inspect.custom"),bf=114,mr=class{type;multihash;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[pn]=!0;toString(){return this.string==null&&(this.string=G.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return Q.createV1(bf,this.multihash)}toJSON(){return this.toString()}equals(t){if(t==null)return!1;if(t instanceof Uint8Array)return rt(this.multihash.bytes,t);if(typeof t=="string")return this.toString()===t;if(t?.toMultihash()?.bytes!=null)return rt(this.multihash.bytes,t.toMultihash().bytes);throw new Error("not valid Id")}[aa](){return`PeerId(${this.toString()})`}},Jr=class extends mr{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}},Qr=class extends mr{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.publicKey}},tn=class extends mr{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.publicKey}},gf=2336,en=class{type="url";multihash;publicKey;url;constructor(t){this.url=t.toString(),this.multihash=_t.digest(V(this.url))}[aa](){return`PeerId(${this.url})`}[pn]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return Q.createV1(gf,this.toMultihash())}toJSON(){return this.toString()}equals(t){return t==null?!1:(t instanceof Uint8Array&&(t=M(t)),t.toString()===this.toString())}};function ca(e){if(wf(e))return new Jr({multihash:e});if(xf(e))try{let t=sa(e);if(t.type==="Ed25519")return new Qr({multihash:e,publicKey:t});if(t.type==="secp256k1")return new tn({multihash:e,publicKey:t})}catch{let r=M(e.digest);return new en(new URL(r))}throw new Sr("Supplied PeerID Multihash is invalid")}function xf(e){return e.code===_t.code}function wf(e){return e.code===Ye.code}function ua(e,t){let r=(n,o)=>n.toString().localeCompare(o.toString());return e.length!==t.length?!1:(t.sort(r),e.sort(r).every((n,o)=>t[o].equals(n)))}var ct=class extends Error{static name="InvalidMultiaddrError";name="InvalidMultiaddrError"},Jt=class extends Error{static name="ValidationError";name="ValidationError"},yr=class extends Error{static name="InvalidParametersError";name="InvalidParametersError"},rn=class extends Error{static name="UnknownProtocolError";name="UnknownProtocolError"};var nn=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,o){return this.readAtomically(()=>{let s=0,i=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",f=2**(8*o)-1;for(;;){let l=this.readAtomically(()=>{let h=this.readChar();if(h===void 0)return;let u=Number.parseInt(h,t);if(!Number.isNaN(u))return u});if(l===void 0)break;if(s*=t,s+=l,s>f||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&c&&i>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let o=n*2;if(n<r.length-3){let i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2],r[o+3]=i[3],[o+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[o,!1];r[o]=s>>8,r[o+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,o]=t(r);if(n===16)return r;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),i=16-(n+2),[a]=t(s.subarray(0,i));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var Ef=45,Sf=15,on=new nn;function Jo(e){if(!(e.length>Sf))return on.new(e).parseWith(()=>on.readIPv4Addr())}function Qo(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>Ef))return on.new(e).parseWith(()=>on.readIPv6Addr())}function sn(e){return!!Jo(e)}function la(e){return!!Qo(e)}function es(e){return t=>M(t,e)}function rs(e){return t=>V(t,e)}function ze(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function we(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(t)}function ha(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=V(t[0],"base32"),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=we(n);return Ut([r,o],r.length+o.length)}function da(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=te.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=we(n);return Ut([r,o],r.length+o.length)}function ns(e){let t=e.subarray(0,e.length-2),r=e.subarray(e.length-2),n=M(t,"base32"),o=ze(r);return`${n}:${o}`}var os=function(e){e=e.toString().trim();let t=new Uint8Array(4);return e.split(/\./g).forEach((r,n)=>{let o=parseInt(r,10);if(isNaN(o)||o<0||o>255)throw new ct("Invalid byte value in IP address");t[n]=o}),t},pa=function(e){let t=0;e=e.toString().trim();let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=sn(r[n]),i;s&&(i=os(r[n]),r[n]=M(i.subarray(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,M(i.subarray(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){r[n]===""&&(r[n]="0");let s=parseInt(r[n],16);if(isNaN(s)||s<0||s>65535)throw new ct("Invalid byte value in IP address");o[t++]=s>>8&255,o[t++]=s&255}return o},ma=function(e){if(e.byteLength!==4)throw new ct("IPv4 address was incorrect length");let t=[];for(let r=0;r<e.byteLength;r++)t.push(e[r]);return t.join(".")},ya=function(e){if(e.byteLength!==16)throw new ct("IPv6 address was incorrect length");let t=[];for(let n=0;n<e.byteLength;n+=2){let o=e[n],s=e[n+1],i=`${o.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`;t.push(i)}let r=t.join(":");try{let n=new URL(`http://[${r}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new ct(`Invalid IPv6 address "${r}"`)}};function ba(e){try{let t=new URL(`http://[${e}]`);return t.hostname.substring(1,t.hostname.length-1)}catch{throw new ct(`Invalid IPv6 address "${e}"`)}}var ts=Object.values(We).map(e=>e.decoder),vf=(function(){let e=ts[0].or(ts[1]);return ts.slice(2).forEach(t=>e=e.or(t)),e})();function ga(e){return vf.decode(e)}function xa(e){return t=>e.encoder.encode(t)}function Af(e){if(parseInt(e).toString()!==e)throw new Jt("Value must be an integer")}function If(e){if(e<0)throw new Jt("Value must be a positive integer, or zero")}function Bf(e){return t=>{if(t>e)throw new Jt(`Value must be smaller than or equal to ${e}`)}}function _f(...e){return t=>{for(let r of e)r(t)}}var br=_f(Af,If,Bf(65535));var st=-1,ss=class{protocolsByCode=new Map;protocolsByName=new Map;getProtocol(t){let r;if(typeof t=="string"?r=this.protocolsByName.get(t):r=this.protocolsByCode.get(t),r==null)throw new rn(`Protocol ${t} was unknown`);return r}addProtocol(t){this.protocolsByCode.set(t.code,t),this.protocolsByName.set(t.name,t),t.aliases?.forEach(r=>{this.protocolsByName.set(r,t)})}removeProtocol(t){let r=this.protocolsByCode.get(t);r!=null&&(this.protocolsByCode.delete(r.code),this.protocolsByName.delete(r.name),r.aliases?.forEach(n=>{this.protocolsByName.delete(n)}))}},vt=new ss,nl=[{code:4,name:"ip4",size:32,valueToBytes:os,bytesToValue:ma,validate:e=>{if(!sn(e))throw new Jt(`Invalid IPv4 address "${e}"`)}},{code:6,name:"tcp",size:16,valueToBytes:we,bytesToValue:ze,validate:br},{code:273,name:"udp",size:16,valueToBytes:we,bytesToValue:ze,validate:br},{code:33,name:"dccp",size:16,valueToBytes:we,bytesToValue:ze,validate:br},{code:41,name:"ip6",size:128,valueToBytes:pa,bytesToValue:ya,stringToValue:ba,validate:e=>{if(!la(e))throw new Jt(`Invalid IPv6 address "${e}"`)}},{code:42,name:"ip6zone",size:st},{code:43,name:"ipcidr",size:8,bytesToValue:es("base10"),valueToBytes:rs("base10")},{code:53,name:"dns",size:st,resolvable:!0},{code:54,name:"dns4",size:st,resolvable:!0},{code:55,name:"dns6",size:st,resolvable:!0},{code:56,name:"dnsaddr",size:st,resolvable:!0},{code:132,name:"sctp",size:16,valueToBytes:we,bytesToValue:ze,validate:br},{code:301,name:"udt"},{code:302,name:"utp"},{code:400,name:"unix",size:st,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:421,name:"p2p",aliases:["ipfs"],size:st,bytesToValue:es("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?rs("base58btc")(e):Q.parse(e).multihash.bytes},{code:444,name:"onion",size:96,bytesToValue:ns,valueToBytes:ha},{code:445,name:"onion3",size:296,bytesToValue:ns,valueToBytes:da},{code:446,name:"garlic64",size:st},{code:447,name:"garlic32",size:st},{code:448,name:"tls"},{code:449,name:"sni",size:st},{code:454,name:"noise"},{code:460,name:"quic"},{code:461,name:"quic-v1"},{code:465,name:"webtransport"},{code:466,name:"certhash",size:st,bytesToValue:xa(Tn),valueToBytes:ga},{code:480,name:"http"},{code:481,name:"http-path",size:st,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:443,name:"https"},{code:477,name:"ws"},{code:478,name:"wss"},{code:479,name:"p2p-websocket-star"},{code:277,name:"p2p-stardust"},{code:275,name:"p2p-webrtc-star"},{code:276,name:"p2p-webrtc-direct"},{code:280,name:"webrtc-direct"},{code:281,name:"webrtc"},{code:290,name:"p2p-circuit"},{code:777,name:"memory",size:st}];nl.forEach(e=>{vt.addProtocol(e)});function wa(e){let t=[],r=0;for(;r<e.length;){let n=Eo(e,r),o=vt.getProtocol(n),s=Bt(n),i=ol(o,e,r+s),a=0;i>0&&o.size===st&&(a=Bt(i));let c=s+a+i,f={code:n,name:o.name,bytes:e.subarray(r,r+c)};if(i>0){let l=r+s+a,h=e.subarray(l,l+i);f.value=o.bytesToValue?.(h)??M(h)}t.push(f),r+=c}return t}function Ea(e){let t=0,r=[];for(let n of e){if(n.bytes==null){let o=vt.getProtocol(n.code),s=Bt(n.code),i,a=0,c=0;n.value!=null&&(i=o.valueToBytes?.(n.value)??V(n.value),a=i.byteLength,o.size===st&&(c=Bt(a)));let f=new Uint8Array(s+c+a),l=0;Ne(n.code,f,l),l+=s,i!=null&&(o.size===st&&(Ne(a,f,l),l+=c),f.set(i,l)),n.bytes=f}r.push(n.bytes),t+=n.bytes.byteLength}return Ut(r,t)}function Sa(e){if(e.charAt(0)!=="/")throw new ct('String multiaddr must start with "/"');let t=[],r="protocol",n="",o="";for(let s=1;s<e.length;s++){let i=e.charAt(s);i!=="/"&&(r==="protocol"?o+=e.charAt(s):n+=e.charAt(s));let a=s===e.length-1;if(i==="/"||a){let c=vt.getProtocol(o);if(r==="protocol"){if(c.size==null||c.size===0){t.push({code:c.code,name:c.name}),n="",o="",r="protocol";continue}else if(a)throw new ct(`Component ${o} was missing value`);r="value"}else if(r==="value"){let f={code:c.code,name:c.name};if(c.size!=null&&c.size!==0){if(n==="")throw new ct(`Component ${o} was missing value`);f.value=c.stringToValue?.(n)??n}t.push(f),n="",o="",r="protocol"}}}if(o!==""&&n!=="")throw new ct("Incomplete multiaddr");return t}function va(e){return`/${e.flatMap(t=>{if(t.value==null)return t.name;let r=vt.getProtocol(t.code);if(r==null)throw new ct(`Unknown protocol code ${t.code}`);return[t.name,r.valueToString?.(t.value)??t.value]}).join("/")}`}function ol(e,t,r){return e.size==null||e.size===0?0:e.size>0?e.size/8:Eo(t,r)}var sl=Symbol.for("nodejs.util.inspect.custom"),ds=Symbol.for("@multiformats/multiaddr"),il=[53,54,55,56],hs=class extends Error{constructor(t="No available resolver"){super(t),this.name="NoAvailableResolverError"}};function al(e){if(e==null&&(e="/"),Ia(e))return e.getComponents();if(e instanceof Uint8Array)return wa(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),Sa(e);if(Array.isArray(e))return e;throw new ct("Must be a string, Uint8Array, Component[], or another Multiaddr")}var ln=class e{[ds]=!0;#t;#e;#r;constructor(t="/",r={}){this.#t=al(t),r.validate!==!1&&cl(this)}get bytes(){return this.#r==null&&(this.#r=Ea(this.#t)),this.#r}toString(){return this.#e==null&&(this.#e=va(this.#t)),this.#e}toJSON(){return this.toString()}toOptions(){let t,r,n,o,s="";for(let{code:a,name:c,value:f}of this.#t)a===42&&(s=`%${f??""}`),il.includes(a)&&(r="tcp",o=443,n=`${f??""}${s}`,t=a===55?6:4),(a===6||a===273)&&(r=c==="tcp"?"tcp":"udp",o=parseInt(f??"")),(a===4||a===41)&&(r="tcp",n=`${f??""}${s}`,t=a===41?6:4);if(t==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:o}}getComponents(){return[...this.#t]}protos(){return this.#t.map(({code:t,value:r})=>{let n=vt.getProtocol(t);return{code:t,size:n.size??0,name:n.name,resolvable:!!n.resolvable,path:!!n.path}})}protoCodes(){return this.#t.map(({code:t})=>t)}protoNames(){return this.#t.map(({name:t})=>t)}tuples(){return this.#t.map(({code:t,value:r})=>{if(r==null)return[t];let n=vt.getProtocol(t),o=[t];return r!=null&&o.push(n.valueToBytes?.(r)??V(r)),o})}stringTuples(){return this.#t.map(({code:t,value:r})=>r==null?[t]:[t,r])}encapsulate(t){let r=new e(t);return new e([...this.#t,...r.getComponents()],{validate:!1})}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new yr(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new e(n.slice(0,o),{validate:!1})}decapsulateCode(t){let r;for(let n=this.#t.length-1;n>-1;n--)if(this.#t[n].code===t){r=n;break}return new e(this.#t.slice(0,r),{validate:!1})}getPeerId(){try{let t=[];this.#t.forEach(({code:n,value:o})=>{n===421&&t.push([n,o]),n===290&&(t=[])});let r=t.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?M(G.decode(`z${n}`),"base58btc"):M(Q.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(let t of this.#t)if(vt.getProtocol(t.code).path)return t.value??null;return null}equals(t){return rt(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=Aa.get(r.name);if(n==null)throw new hs(`no available resolver for ${r.name}`);return(await n(this,t)).map(s=>xr(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(){return!(this.#t.length!==2||this.#t[0].code!==4&&this.#t[0].code!==41||this.#t[1].code!==6&&this.#t[1].code!==273)}[sl](){return`Multiaddr(${this.toString()})`}};function cl(e){e.getComponents().forEach(t=>{let r=vt.getProtocol(t.code);t.value!=null&&r.validate?.(t.value)})}var yy=parseInt("0xFFFF",16),by=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var Aa=new Map;function Ia(e){return!!e?.[ds]}function xr(e){return new ln(e)}var Ca="libp2p-peer-record",Ta=Uint8Array.from([3,1]);var wr;(function(e){let t;(function(n){let o;n.codec=()=>(o==null&&(o=Yt((s,i,a={})=>{a.lengthDelimited!==!1&&i.fork(),s.multiaddr!=null&&s.multiaddr.byteLength>0&&(i.uint32(10),i.bytes(s.multiaddr)),a.lengthDelimited!==!1&&i.ldelim()},(s,i,a={})=>{let c={multiaddr:it(0)},f=i==null?s.len:s.pos+i;for(;s.pos<f;){let l=s.uint32();switch(l>>>3){case 1:{c.multiaddr=s.bytes();break}default:{s.skipType(l&7);break}}}return c})),o),n.encode=s=>jt(s,n.codec()),n.decode=(s,i)=>$t(s,n.codec(),i)})(t=e.AddressInfo||(e.AddressInfo={}));let r;e.codec=()=>(r==null&&(r=Yt((n,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),n.peerId!=null&&n.peerId.byteLength>0&&(o.uint32(10),o.bytes(n.peerId)),n.seq!=null&&n.seq!==0n&&(o.uint32(16),o.uint64(n.seq)),n.addresses!=null)for(let i of n.addresses)o.uint32(26),e.AddressInfo.codec().encode(i,o);s.lengthDelimited!==!1&&o.ldelim()},(n,o,s={})=>{let i={peerId:it(0),seq:0n,addresses:[]},a=o==null?n.len:n.pos+o;for(;n.pos<a;){let c=n.uint32();switch(c>>>3){case 1:{i.peerId=n.bytes();break}case 2:{i.seq=n.uint64();break}case 3:{if(s.limits?.addresses!=null&&i.addresses.length===s.limits.addresses)throw new Zr('Decode error - map field "addresses" had too many elements');i.addresses.push(e.AddressInfo.codec().decode(n,n.uint32(),{limits:s.limits?.addresses$}));break}default:{n.skipType(c&7);break}}}return i})),r),e.encode=n=>jt(n,e.codec()),e.decode=(n,o)=>$t(n,e.codec(),o)})(wr||(wr={}));var hn=class e{static createFromProtobuf=t=>{let r=wr.decode(t),n=ca($e(r.peerId)),o=(r.addresses??[]).map(i=>xr(i.multiaddr)),s=r.seq;return new e({peerId:n,multiaddrs:o,seqNumber:s})};static DOMAIN=Ca;static CODEC=Ta;peerId;multiaddrs;seqNumber;domain=e.DOMAIN;codec=e.CODEC;marshaled;constructor(t){let{peerId:r,multiaddrs:n,seqNumber:o}=t;this.peerId=r,this.multiaddrs=n??[],this.seqNumber=o??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=wr.encode({peerId:this.peerId.toMultihash().bytes,seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(t=>({multiaddr:t.bytes}))})),this.marshaled}equals(t){return!(!(t instanceof e)||!this.peerId.equals(t.peerId)||this.seqNumber!==t.seqNumber||!ua(this.multiaddrs,t.multiaddrs))}};return Ua(dl);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return Libp2PPeerRecord}));
//# sourceMappingURL=index.min.js.map
